"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[8121],{8121:function(e,t,o){o.r(t),o.d(t,{default:function(){return L}});var a=o(6768),l=o(4232),i=o(5130);const r=e=>((0,a.Qi)("data-v-7d8f67bc"),e=e(),(0,a.jt)(),e),s={class:"col-md-12 list"},d={key:0},n={class:"form-group d-inline-flex align-items-center mb-2 col-12"},c=r((()=>(0,a.Lk)("label",{for:"group_id"},"Код направление:",-1))),f=["value"],u={class:"form-group d-inline-flex align-items-center mb-2 col-12"},p=r((()=>(0,a.Lk)("label",{for:"prof_name"},"Название профиля:",-1))),m={class:"form-group mt-3"},b=["disabled"],h={class:"spinner-border spinner-border-sm"},_={key:1},g=(0,a.Fv)('<div class="form-group" data-v-7d8f67bc><label class="form-control skeleton-text skeleton-animate" data-v-7d8f67bc></label><input type="text" class="form-control skeleton skeleton-animate" data-v-7d8f67bc></div><div class="form-group" data-v-7d8f67bc><label class="form-control skeleton-text skeleton-animate" data-v-7d8f67bc></label><input type="text" class="form-control skeleton skeleton-animate" data-v-7d8f67bc></div>',2),k=[g];function v(e,t,o,r,g,v){const y=(0,a.g2)("Select2"),P=(0,a.g2)("Field"),F=(0,a.g2)("ErrorMessage"),C=(0,a.g2)("router-link"),w=(0,a.g2)("Form");return(0,a.uX)(),(0,a.CE)("div",s,[g.profile?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(w,{onSubmit:v.updateProfile,"validation-schema":g.schema},{default:(0,a.k6)((({errors:e})=>[(0,a.Lk)("div",null,[(0,a.Lk)("div",n,[c,(0,a.bF)(y,{class:(0,l.C4)(["col-6",{"form-control is-invalid":e.group_id}]),modelValue:g.editedProfile.prof_dir_id,"onUpdate:modelValue":t[0]||(t[0]=e=>g.editedProfile.prof_dir_id=e),options:g.directions,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,a.bF)(P,{name:"group_id",as:"select",modelValue:g.editedProfile.prof_dir_id,"onUpdate:modelValue":t[1]||(t[1]=e=>g.editedProfile.prof_dir_id=e),hidden:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.directions,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.text),9,f)))),128))])),_:1},8,["modelValue"]),(0,a.bF)(F,{name:"group_id",class:"error-feedback"})]),(0,a.Lk)("div",u,[p,(0,a.bF)(P,{name:"prof_name",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":e.subgroup}]),modelValue:g.editedProfile.prof_name,"onUpdate:modelValue":t[2]||(t[2]=e=>g.editedProfile.prof_name=e)},null,8,["class","modelValue"]),(0,a.bF)(F,{name:"prof_name",class:"error-feedback"})]),(0,a.Lk)("div",m,[(0,a.Lk)("button",{class:"btn btn-primary btn-block float-end",disabled:g.loading},[(0,a.bo)((0,a.Lk)("span",h,null,512),[[i.aG,g.loading]]),(0,a.eW)(" Обновить профиль ")],8,b),(0,a.Lk)("button",{type:"button",class:"btn btn-danger mx-2 float-end",onClick:t[3]||(t[3]=(...e)=>v.deleteProfile&&v.deleteProfile(...e))}," Удалить профиль "),(0,a.bF)(C,{to:"/profiles",class:"btn btn-secondary ml-2 float-start"},{default:(0,a.k6)((()=>[(0,a.eW)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,a.uX)(),(0,a.CE)("div",_,k)),e.message?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,l.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,l.v_)(e.message),3)):(0,a.Q3)("",!0)])}o(4114);var y=o(482),P=o(9041),F=o(619),C=o(7411),w={setup(){const e=(0,C.dj)();return{toast:e}},components:{Form:y.lV,Field:y.D0,ErrorMessage:y.Kw},data(){const e=P.Ik().shape({});return{schema:e,loading:!1,profile:null,editedProfile:null,directions:null}},methods:{async deleteProfile(){try{this.loading=!0;const e=await F.A.deleteProfileById(this.profile.prof_id);e.data,this.loading=!1,this.toast.success("Успешно удалили!"),this.$router.push("/profiles")}catch(e){console.error("Ошибка загрузки данных",e)}},async loadProfilesData(){const e=this.$route.params.profileId;try{const t=await F.A.getProfileById(e);this.profile=t.data,this.editedProfile={...t.data}}catch(t){console.error("Error:",t)}},async updateProfile(){try{this.loading=!0;const e=await F.A.updateProfileById(this.profile.prof_id,this.editedProfile.prof_dir_id,this.editedProfile.prof_name);e.data,this.profile={...this.editedProfile},this.loading=!1,this.toast.success("Успешно обновили профиль!")}catch(e){console.error("Ошибка загрузки данных о профиле:",e)}},async loadDirectionsData(){try{const e=await F.A.getDirectionsAsIdText();this.directions=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Error:",e)}}},created(){this.loadDirectionsData(),this.loadProfilesData()}},x=o(1241);const E=(0,x.A)(w,[["render",v],["__scopeId","data-v-7d8f67bc"]]);var L=E}}]);
//# sourceMappingURL=8121.9268faf9.js.map