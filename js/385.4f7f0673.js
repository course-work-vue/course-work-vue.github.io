"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[385],{385:function(e,a,t){t.r(a),t.d(a,{default:function(){return $}});var l=t(6768),s=t(4232),o=t(5130);const r=e=>((0,l.Qi)("data-v-4515fff8"),e=e(),(0,l.jt)(),e),n={class:"col-md-12 list"},d={key:0},i={class:"form-group d-inline-flex align-items-center mb-2 col-5"},f=r((()=>(0,l.Lk)("label",{for:"lastname"},"Фамилия",-1))),m={class:"form-group d-inline-flex align-items-center mb-2 col-5"},c=r((()=>(0,l.Lk)("label",{for:"name"},"Имя",-1))),u={class:"form-group d-inline-flex align-items-center mb-2 col-5"},p=r((()=>(0,l.Lk)("label",{for:"surname"},"Отчество",-1))),v={class:"form-group d-inline-flex align-items-center mb-2 col-5"},b=r((()=>(0,l.Lk)("label",{for:"passport "},"Серия и номер паспорта",-1))),k={class:"form-group d-inline-flex align-items-center mb-2 col-5"},y=r((()=>(0,l.Lk)("label",{for:"issue_date"},"Дата выдачи",-1))),g={class:"form-group d-inline-flex align-items-center mb-2 col-5"},h=r((()=>(0,l.Lk)("label",{for:"department_code "},"Код подразделения",-1))),x={class:"form-group d-inline-flex align-items-center mb-2 col-5"},P=r((()=>(0,l.Lk)("label",{for:"registration_address "},"Адрес регистрации",-1))),_={class:"form-group d-inline-flex align-items-center mb-2 col-5"},V=r((()=>(0,l.Lk)("label",{for:"SNILS"},"СНИЛС",-1))),L={class:"form-group d-inline-flex align-items-center mb-2 col-5"},F=r((()=>(0,l.Lk)("label",{for:"phone_number "},"Телефон",-1))),C={class:"form-group d-inline-flex align-items-center mb-2 col-5"},I=r((()=>(0,l.Lk)("label",{for:"email"},"Email",-1))),S={class:"form-group mt-3"},U=["disabled"],w={class:"spinner-border spinner-border-sm"},A={key:1},E=(0,l.Fv)('<div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div><div class="form-group" data-v-4515fff8><label class="form-control skeleton-text skeleton-animate" data-v-4515fff8></label><input type="text" class="form-control skeleton skeleton-animate" data-v-4515fff8></div>',13),D=[E];function j(e,a,t,r,E,j){const G=(0,l.g2)("Field"),N=(0,l.g2)("ErrorMessage"),X=(0,l.g2)("router-link"),B=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",n,[E.payer?((0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(B,{onSubmit:j.updatePayer,"validation-schema":E.schema},{default:(0,l.k6)((({errors:e})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",i,[f,(0,l.bF)(G,{name:"lastname",type:"text",value:"",class:(0,s.C4)(["form-control",{"is-invalid":e.lastname}]),modelValue:E.editedPayer.lastname,"onUpdate:modelValue":a[0]||(a[0]=e=>E.editedPayer.lastname=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"lastname",class:"error-feedback"})]),(0,l.Lk)("div",m,[c,(0,l.bF)(G,{name:"name",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.name}]),value:"",modelValue:E.editedPayer.name,"onUpdate:modelValue":a[1]||(a[1]=e=>E.editedPayer.name=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"name",class:"error-feedback"})]),(0,l.Lk)("div",u,[p,(0,l.bF)(G,{name:"surname",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.patronymic}]),value:"",modelValue:E.editedPayer.surname,"onUpdate:modelValue":a[2]||(a[2]=e=>E.editedPayer.surname=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"surname",class:"error-feedback"})]),(0,l.Lk)("div",v,[b,(0,l.bF)(G,{name:"passport ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.passport}]),value:"",modelValue:E.editedPayer.passport,"onUpdate:modelValue":a[3]||(a[3]=e=>E.editedPayer.passport=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"passport ",class:"error-feedback"})]),(0,l.Lk)("div",k,[y,(0,l.bF)(G,{name:"issue_date",type:"date",class:(0,s.C4)(["form-control",{"is-invalid":e.date}]),value:"",modelValue:E.editedPayer.issue_date,"onUpdate:modelValue":a[4]||(a[4]=e=>E.editedPayer.issue_date=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"issue_date ",class:"error-feedback"})]),(0,l.Lk)("div",g,[h,(0,l.bF)(G,{name:"department_code ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.department_code}]),value:"",modelValue:E.editedPayer.department_code,"onUpdate:modelValue":a[5]||(a[5]=e=>E.editedPayer.department_code=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"department_code ",class:"error-feedback"})]),(0,l.Lk)("div",x,[P,(0,l.bF)(G,{name:"registration_address ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.registration_address}]),value:"",modelValue:E.editedPayer.registration_address,"onUpdate:modelValue":a[6]||(a[6]=e=>E.editedPayer.registration_address=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"registration_address ",class:"error-feedback"})]),(0,l.Lk)("div",_,[V,(0,l.bF)(G,{name:"SNILS",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.SNILS}]),value:"",modelValue:E.editedPayer.snils,"onUpdate:modelValue":a[7]||(a[7]=e=>E.editedPayer.snils=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"SNILS",class:"error-feedback"})]),(0,l.Lk)("div",L,[F,(0,l.bF)(G,{name:"phone_number ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.phone_number}]),value:"",modelValue:E.editedPayer.phone_number,"onUpdate:modelValue":a[8]||(a[8]=e=>E.editedPayer.phone_number=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"phone_number ",class:"error-feedback"})]),(0,l.Lk)("div",C,[I,(0,l.bF)(G,{name:"email",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.email}]),value:"",modelValue:E.editedPayer.email,"onUpdate:modelValue":a[9]||(a[9]=e=>E.editedPayer.email=e)},null,8,["class","modelValue"]),(0,l.bF)(N,{name:"email",class:"error-feedback"})]),(0,l.Lk)("div",S,[(0,l.Lk)("button",{class:"btn btn-primary btn-block float-start",disabled:E.loading},[(0,l.bo)((0,l.Lk)("span",w,null,512),[[o.aG,E.loading]]),(0,l.eW)(" Обновить законного представителя ")],8,U),(0,l.Lk)("button",{type:"button",class:"btn btn-danger mx-2 float-end",onClick:a[10]||(a[10]=(...e)=>j.deletePayer&&j.deletePayer(...e))}," Удалить плательщика "),(0,l.bF)(X,{to:"/payers",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,l.uX)(),(0,l.CE)("div",A,D)),e.message?((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,s.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,s.v_)(e.message),3)):(0,l.Q3)("",!0)])}t(4114);var G=t(482),N=t(9041),X=t(619),B=t(7411),M={setup(){const e=(0,B.dj)();return{toast:e}},components:{Form:G.lV,Field:G.D0,ErrorMessage:G.Kw},data(){const e=N.Ik().shape({});return{schema:e,loading:!1,payer:null,editedPayer:null,groups:null}},methods:{async deletePayer(){try{this.loading=!0;const e=await X.A.deletePayerById(this.payer.id);e.data,this.loading=!1,this.toast.success("Успешно удалили!"),this.$router.push("/payers")}catch(e){console.error("Ошибка загрузки данных",e)}},async loadPayerDetail(){const e=this.$route.params.payerId;try{const a=await X.A.getPayerById(e);this.payer=a.data,this.editedPayer={...a.data}}catch(a){console.error("Error loading payer details:",a)}},async updatePayer(){try{this.loading=!0;const e=await X.A.updatePayerById(this.payer.id,this.editedPayer.name,this.editedPayer.surname,this.editedPayer.lastname,this.editedPayer.snils,this.editedPayer.passport,this.editedPayer.issued_by,this.editedPayer.issue_date,this.editedPayer.department_code,this.editedPayer.registration_address,this.editedPayer.phone_number,this.editedPayer.email);e.data,this.payer={...this.editedPayer},this.loading=!1,this.toast.success("Успешно обновили плательщика!")}catch(e){console.error("Ошибка :",e)}},async loadGroupsData(){try{const e=await X.A.getGroupsAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка :",e)}}},created(){this.loadGroupsData(),this.loadPayerDetail()}},Q=t(1241);const W=(0,Q.A)(M,[["render",j],["__scopeId","data-v-4515fff8"]]);var $=W}}]);
//# sourceMappingURL=385.4f7f0673.js.map