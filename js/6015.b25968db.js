"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[6015],{6015:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var l=a(6768),o=a(4232),n=a(5130);const s=e=>((0,l.Qi)("data-v-30bd1334"),e=e(),(0,l.jt)(),e),d={class:"col-md-12 list"},i={key:0},r={class:"form-group d-inline-flex align-items-center col-5 mb-2"},c=s((()=>(0,l.Lk)("label",{for:"contract_id"},"Номер договора",-1))),m=["value"],u={class:"form-group d-inline-flex align-items-center mb-2"},b=s((()=>(0,l.Lk)("label",{for:"expiration_date"},"Дата просрочки:",-1))),p={class:"form-group d-inline-flex align-items-center mb-2"},v=s((()=>(0,l.Lk)("label",{for:"date_40"},"Дата оплаты 40%:",-1))),k={class:"form-group d-inline-flex align-items-center mb-2 col-6"},f=s((()=>(0,l.Lk)("label",{for:"all_sum"},"Вся сумма:",-1))),y={class:"form-group d-inline-flex align-items-center mb-2 col-5"},_=s((()=>(0,l.Lk)("label",{for:"deposited_amount"},"Внесённая сумма:",-1))),g={class:"form-group d-inline-flex align-items-center mb-2 col-5"},x=s((()=>(0,l.Lk)("label",{for:"left_to_pay"},"Остаточная сумма:",-1))),h={class:"form-group d-inline-flex align-items-center mb-2 col-6"},P=s((()=>(0,l.Lk)("label",{for:"bank"},"Банк:",-1))),V={class:"form-group mt-3"},F=["disabled"],C={class:"spinner-border spinner-border-sm"},L={key:1},w=(0,l.Fv)('<div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div><div class="form-group" data-v-30bd1334><label class="form-control skeleton-text skeleton-animate" data-v-30bd1334></label><input type="text" class="form-control skeleton skeleton-animate" data-v-30bd1334></div>',13),E=[w];function A(e,t,a,s,w,A){const I=(0,l.g2)("Select2"),U=(0,l.g2)("Field"),D=(0,l.g2)("ErrorMessage"),X=(0,l.g2)("router-link"),j=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",d,[w.payment?((0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(j,{onSubmit:A.updatePayment,"validation-schema":w.schema},{default:(0,l.k6)((({errors:a})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",r,[c,(0,l.bF)(I,{class:(0,o.C4)(["col-5",{"form-control is-invalid":a.contract_id}]),modelValue:w.editedPayment.contract_id,"onUpdate:modelValue":t[0]||(t[0]=e=>w.editedPayment.contract_id=e),options:w.contracts,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(U,{name:"contract_id",as:"select",modelValue:e.contract_id,"onUpdate:modelValue":t[1]||(t[1]=t=>e.contract_id=t),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(w.contracts,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.text),9,m)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(D,{name:"contract_id",class:"error-feedback"})]),(0,l.Lk)("div",u,[b,(0,l.bF)(U,{name:"expiration_date",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":a.expiration_date}]),value:"",modelValue:w.editedPayment.expiration_date,"onUpdate:modelValue":t[2]||(t[2]=e=>w.editedPayment.expiration_date=e)},null,8,["class","modelValue"]),(0,l.bF)(D,{name:"expiration_date",class:"error-feedback"})]),(0,l.Lk)("div",p,[v,(0,l.bF)(U,{name:"date_40",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":a.date_40}]),value:"",modelValue:w.editedPayment.date_40,"onUpdate:modelValue":t[3]||(t[3]=e=>w.editedPayment.date_40=e)},null,8,["class","modelValue"]),(0,l.bF)(D,{name:"date_40",class:"error-feedback"})]),(0,l.Lk)("div",k,[f,(0,l.bF)(U,{name:"all_sum",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":a.all_sum}]),value:"",modelValue:w.editedPayment.all_sum,"onUpdate:modelValue":t[4]||(t[4]=e=>w.editedPayment.all_sum=e)},null,8,["class","modelValue"]),(0,l.bF)(D,{name:"all_sum",class:"error-feedback"})]),(0,l.Lk)("div",y,[_,(0,l.bF)(U,{name:"deposited_amount",type:"number",class:(0,o.C4)(["form-control",{"is-invalid":a.deposited_amount}]),value:"",modelValue:w.editedPayment.deposited_amount,"onUpdate:modelValue":t[5]||(t[5]=e=>w.editedPayment.deposited_amount=e)},null,8,["class","modelValue"]),(0,l.bF)(D,{name:"deposited_amount",class:"error-feedback"})]),(0,l.Lk)("div",g,[x,(0,l.bF)(U,{name:"left_to_pay",type:"number",class:(0,o.C4)(["form-control",{"is-invalid":a.left_to_pay}]),value:"",modelValue:w.editedPayment.left_to_pay,"onUpdate:modelValue":t[6]||(t[6]=e=>w.editedPayment.left_to_pay=e)},null,8,["class","modelValue"]),(0,l.bF)(D,{name:"left_to_pay",class:"error-feedback"})]),(0,l.Lk)("div",h,[P,(0,l.bF)(U,{name:"bank",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":a.bank}]),value:"",modelValue:w.editedPayment.bank,"onUpdate:modelValue":t[7]||(t[7]=e=>w.editedPayment.bank=e)},null,8,["class","modelValue"]),(0,l.bF)(D,{name:"bank",class:"error-feedback"})]),(0,l.Lk)("div",V,[(0,l.Lk)("button",{class:"btn btn-primary btn-block float-start",disabled:w.loading},[(0,l.bo)((0,l.Lk)("span",C,null,512),[[n.aG,w.loading]]),(0,l.eW)(" Обновить платёж ")],8,F),(0,l.Lk)("button",{type:"button",class:"btn btn-danger mx-2 float-end",onClick:t[8]||(t[8]=(...e)=>A.deletePayment&&A.deletePayment(...e))}," Удалить платёж "),(0,l.bF)(X,{to:"/payments",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,l.uX)(),(0,l.CE)("div",L,E)),e.message?((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,o.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,o.v_)(e.message),3)):(0,l.Q3)("",!0)])}a(4114);var I=a(482),U=a(9041),D=a(619),X=a(7411),j={setup(){const e=(0,X.dj)();return{toast:e}},components:{Form:I.lV,Field:I.D0,ErrorMessage:I.Kw},data(){const e=U.Ik().shape({});return{schema:e,loading:!1,payment:null,editedPayment:null,groups:null,contracts:null}},methods:{async deletePayment(){try{this.loading=!0;const e=await D.A.deletePaymentById(this.payment.id);e.data,this.loading=!1,this.toast.success("Успешно удалили!"),this.$router.push("/payments")}catch(e){console.error("Ошибка загрузки данных",e)}},async loadPaymentDetail(){const e=this.$route.params.paymentID;try{const t=await D.A.getPaymentById(e);this.payment=t.data,this.editedPayment={...t.data}}catch(t){console.error("Error loading payer details:",t)}},async updatePayment(){try{this.loading=!0;const e=await D.A.updatePaymentById(this.payment.id,this.editedPayment.contract_id,this.editedPayment.expiration_date,this.editedPayment.date_40,this.editedPayment.all_sum,this.editedPayment.deposited_amount,this.editedPayment.left_to_pay,this.editedPayment.bank);e.data,this.payer={...this.editedPayer},this.loading=!1,this.toast.success("Успешно обновили плательщика!")}catch(e){console.error("Ошибка :",e)}},async loadContractsData(){try{const e=await D.A.getContractsAsIdText();this.contracts=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Ошибка загрузки данных:",e)}}},created(){this.loadPaymentDetail(),this.loadContractsData()}},B=a(1241);const S=(0,B.A)(j,[["render",A],["__scopeId","data-v-30bd1334"]]);var K=S}}]);
//# sourceMappingURL=6015.b25968db.js.map