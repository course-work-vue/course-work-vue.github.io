"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[842],{842:function(e,a,t){t.r(a),t.d(a,{default:function(){return z}});var l=t(6768),o=t(4232),s=t(5130);const r=e=>((0,l.Qi)("data-v-f0255686"),e=e(),(0,l.jt)(),e),n={class:"list"},d={key:0},i=(0,l.Fv)('<div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div>',9),c=[i],m={key:1,class:"col-md-12"},u={class:"form-group d-inline-flex align-items-center mb-2 col-8"},f=r((()=>(0,l.Lk)("label",{for:"listener_id"},"Слушатель",-1))),p=["value"],v={class:"form-group d-inline-flex align-items-center mb-2 col-6"},k=r((()=>(0,l.Lk)("label",{for:"payer_id"},"Законный представитель",-1))),b=["value"],g={class:"form-group d-inline-flex align-items-center mb-2 col-5"},_=r((()=>(0,l.Lk)("label",{for:"contr_number"},"Номер договора",-1))),y={class:"form-group d-inline-flex align-items-center mb-2 col-5"},h=r((()=>(0,l.Lk)("label",{for:"program_id"},"Программы",-1))),V=["value"],x={class:"form-group d-inline-flex align-items-center mb-2 col-5"},L=r((()=>(0,l.Lk)("label",{for:"cert_date"},"Дата выдачи сертификата",-1))),F={class:"form-group d-inline-flex align-items-center mb-2 col-5"},C=r((()=>(0,l.Lk)("label",{for:"listened_hours"},"Прослушанные часы",-1))),A={class:"form-group d-inline-flex align-items-center mb-2 col-5"},E=r((()=>(0,l.Lk)("label",{for:"date_enroll"},"Дата зачисления",-1))),w={class:"form-group d-inline-flex align-items-center mb-2 col-5"},X=r((()=>(0,l.Lk)("label",{for:"date_kick"},"Дата отчисления",-1))),U={class:"form-group d-inline-flex align-items-center mb-2 col-6"},I=r((()=>(0,l.Lk)("label",{for:"group_to_move"},"Группа для перевода:",-1))),D=["value"],P={class:"form-group mt-3"},K=["disabled"],j={class:"spinner-border spinner-border-sm"};function q(e,a,t,r,i,q){const T=(0,l.g2)("Select2"),G=(0,l.g2)("Field"),N=(0,l.g2)("ErrorMessage"),S=(0,l.g2)("router-link"),M=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",n,[i.dataLoading?((0,l.uX)(),(0,l.CE)("div",d,c)):((0,l.uX)(),(0,l.CE)("div",m,[(0,l.bF)(M,{onSubmit:q.addContract,"validation-schema":i.schema},{default:(0,l.k6)((({errors:t})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",u,[f,(0,l.bF)(T,{class:(0,o.C4)(["col-5",{"form-control is-invalid":t.listener_id}]),modelValue:e.myValue,"onUpdate:modelValue":a[0]||(a[0]=a=>e.myValue=a),options:i.listeners,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(G,{name:"listener_id",as:"select",modelValue:e.myValue,"onUpdate:modelValue":a[1]||(a[1]=a=>e.myValue=a),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.listeners,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.text),9,p)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(N,{name:"listener_id",class:"error-feedback"})]),(0,l.Lk)("div",v,[k,(0,l.bF)(T,{class:(0,o.C4)(["col-5",{"form-control is-invalid":t.payer_id}]),modelValue:e.myValue2,"onUpdate:modelValue":a[2]||(a[2]=a=>e.myValue2=a),options:i.payers,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(G,{name:"payer_id",as:"select",modelValue:e.myValue2,"onUpdate:modelValue":a[3]||(a[3]=a=>e.myValue2=a),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.payers,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.text),9,b)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(N,{name:"payer_id",class:"error-feedback"})]),(0,l.Lk)("div",g,[_,(0,l.bF)(G,{name:"contr_number",type:"text",value:"",class:(0,o.C4)(["form-control",{"is-invalid":t.contr_number}])},null,8,["class"]),(0,l.bF)(N,{name:"contr_number",class:"error-feedback"})]),(0,l.Lk)("div",y,[h,(0,l.bF)(T,{class:(0,o.C4)(["col-5",{"form-control is-invalid":t.program_id}]),modelValue:e.myValue3,"onUpdate:modelValue":a[4]||(a[4]=a=>e.myValue3=a),options:i.programs,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(G,{name:"program_id",as:"select",modelValue:e.myValue3,"onUpdate:modelValue":a[5]||(a[5]=a=>e.myValue3=a),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.programs,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.text),9,V)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(N,{name:"program_id",class:"error-feedback"})]),(0,l.Lk)("div",x,[L,(0,l.bF)(G,{name:"cert_date",type:"date",value:"NULL",class:(0,o.C4)(["form-control",{"is-invalid":t.cert_date}])},null,8,["class"]),(0,l.bF)(N,{name:"cert_date",class:"error-feedback"})]),(0,l.Lk)("div",F,[C,(0,l.bF)(G,{name:"listened_hours",type:"number",value:"NULL",class:(0,o.C4)(["form-control",{"is-invalid":t.listened_hours}])},null,8,["class"]),(0,l.bF)(N,{name:"listened_hours",class:"error-feedback"})]),(0,l.Lk)("div",A,[E,(0,l.bF)(G,{name:"date_enroll",type:"date",value:"",class:(0,o.C4)(["form-control",{"is-invalid":t.date_enroll}])},null,8,["class"]),(0,l.bF)(N,{name:"date_enroll",class:"error-feedback"})]),(0,l.Lk)("div",w,[X,(0,l.bF)(G,{name:"date_kick",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":t.dadate_kickte_enroll}])},null,8,["class"]),(0,l.bF)(N,{name:"date_kick",class:"error-feedback"})]),(0,l.Lk)("div",U,[I,(0,l.bF)(T,{class:(0,o.C4)(["col-5",{"form-control is-invalid":t.group_to_move}]),modelValue:e.myValueq,"onUpdate:modelValue":a[6]||(a[6]=a=>e.myValueq=a),options:i.groups,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(G,{name:"group_to_move",as:"select",modelValue:e.myValueq,"onUpdate:modelValue":a[7]||(a[7]=a=>e.myValueq=a),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.groups,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.text),9,D)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(N,{name:"group_to_move",class:"error-feedback"})])]),(0,l.Lk)("div",P,[(0,l.Lk)("button",{class:"btn btn-primary btn-block",disabled:i.loading},[(0,l.bo)((0,l.Lk)("span",j,null,512),[[s.aG,i.loading]]),(0,l.eW)(" Добавить договор ")],8,K),(0,l.bF)(S,{to:"/contracts",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1})])])),_:1},8,["onSubmit","validation-schema"]),i.message?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)(["alert",i.successful?"alert-success":"alert-danger"])},(0,o.v_)(i.message),3)):(0,l.Q3)("",!0)]))])}var T=t(482),G=t(9041),N=t(619),S=t(7411),M={setup(){const e=(0,S.dj)();return{toast:e}},name:"AddContract",components:{Form:T.lV,Field:T.D0,ErrorMessage:T.Kw},data(){const e=G.Ik().shape({});return{successful:!1,loading:!1,dataLoading:!0,message:"",schema:e,listeners:null,payers:null,programs:null,groups:null}},computed:{},mounted(){},methods:{async addContract(e){try{this.loading=!0;const a=await N.A.addContract(e.listener_id,e.payer_id,e.contr_number,e.program_id,e.cert_date,e.listened_hours,e.date_enroll,e.date_kick,e.group_to_move);a.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили договор!")}catch(a){this.message="Ошибка",this.toast.error("Ошибка добавления договор"),console.error("Error updating contract details:",a)}},async loadListenersData(){try{const e=await N.A.getListenersAsIdText();this.listeners=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadPayersData(){try{const e=await N.A.getPayersAsIdText();this.payers=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadGroupsData(){try{const e=await N.A.getLgroupsAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data],this.groups.unshift({id:"NULL",text:"Нет"}),console.log(this.groups),this.dataLoading=!1}catch(e){console.error("Error loading data:",e)}},async loadProgramsData(){try{const e=await N.A.getProgramsAsIdText();this.programs=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Ошибка загрузки данных:",e)}}},created(){this.loadListenersData(),this.loadPayersData(),this.loadProgramsData(),this.loadGroupsData()}},Q=t(1241);const W=(0,Q.A)(M,[["render",q],["__scopeId","data-v-f0255686"]]);var z=W}}]);
//# sourceMappingURL=842.65169c1d.js.map