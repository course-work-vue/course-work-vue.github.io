"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[6374],{6374:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var l=a(6768),o=a(4232),s=a(5130);const r=e=>((0,l.Qi)("data-v-f17132b6"),e=e(),(0,l.jt)(),e),n={class:"col-md-12 list"},d={key:0},i={class:"form-group d-inline-flex align-items-center col-5 mb-2"},u=r((()=>(0,l.Lk)("label",{for:"group_number"},"Номер группы:",-1))),c={class:"form-group d-inline-flex align-items-center col-5 mb-2"},m=r((()=>(0,l.Lk)("label",{for:"group_program_id"},"Программа:",-1))),p=["value"],f={class:"form-group d-inline-flex align-items-center col-5 mb-2"},b=r((()=>(0,l.Lk)("label",{for:"hours"},"Общее количество часов:",-1))),v={class:"form-group d-inline-flex align-items-center col-5 mb-2"},k=r((()=>(0,l.Lk)("label",{for:"start_date"},"Дата начала:",-1))),g={class:"form-group d-inline-flex align-items-center col-5 mb-2"},h=r((()=>(0,l.Lk)("label",{for:"end_date"},"Дата окончания:",-1))),_={class:"col-9"},y={class:"table table-bordered col col-3"},x=r((()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"День"),(0,l.Lk)("th",null,"Время начала"),(0,l.Lk)("th",null,"Время окончания")])],-1))),L=["onUpdate:modelValue"],C=["value"],F=["onUpdate:modelValue"],A=["onUpdate:modelValue"],D={class:"form-group d-inline-flex align-items-center col-5 mb-2"},G=r((()=>(0,l.Lk)("label",{for:"people_count"},"Общее количество человек:",-1))),w={class:"form-group mt-3"},E=["disabled"],V={class:"spinner-border spinner-border-sm"},I=r((()=>(0,l.Lk)("br",null,null,-1))),R=r((()=>(0,l.Lk)("hr",{size:"2"},null,-1))),P=r((()=>(0,l.Lk)("h2",null,"Слушатели подходящие под критерий",-1))),U={class:"aggrid"},X={key:1},S=(0,l.Fv)('<div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div><div class="form-group" data-v-f17132b6><label class="form-control skeleton-text skeleton-animate" data-v-f17132b6></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f17132b6></div>',18),N=[S];function B(e,t,a,r,S,B){const K=(0,l.g2)("Field"),W=(0,l.g2)("ErrorMessage"),T=(0,l.g2)("Select2"),$=(0,l.g2)("router-link"),j=(0,l.g2)("Form"),z=(0,l.g2)("ag-grid-vue");return(0,l.uX)(),(0,l.CE)("div",n,[S.group?((0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(j,{onSubmit:B.updateGroup,"validation-schema":S.schema},{default:(0,l.k6)((({errors:a})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",i,[u,(0,l.bF)(K,{name:"group_number",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":a.group_number}]),modelValue:S.editedGroup.group_number,"onUpdate:modelValue":t[0]||(t[0]=e=>S.editedGroup.group_number=e)},null,8,["class","modelValue"]),(0,l.bF)(W,{name:"group_number",class:"error-feedback"})]),(0,l.Lk)("div",c,[m,(0,l.bF)(T,{class:(0,o.C4)(["col-5",{"form-control is-invalid":a.group_program_id}]),modelValue:S.editedGroup.group_program_id,"onUpdate:modelValue":t[1]||(t[1]=e=>S.editedGroup.group_program_id=e),options:S.programs,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(K,{name:"group_program_id",as:"select",modelValue:S.editedGroup.group_program_id,"onUpdate:modelValue":t[2]||(t[2]=e=>S.editedGroup.group_program_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(S.programs,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.text),9,p)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(W,{name:"group_program_id",class:"error-feedback"})]),(0,l.Lk)("div",f,[b,(0,l.bF)(K,{name:"hours",type:"number",class:(0,o.C4)(["form-control",{"is-invalid":a.hours}]),modelValue:S.editedGroup.hours,"onUpdate:modelValue":t[3]||(t[3]=e=>S.editedGroup.hours=e)},null,8,["class","modelValue"]),(0,l.bF)(W,{name:"hours",class:"error-feedback"})]),(0,l.Lk)("div",v,[k,(0,l.bF)(K,{id:"start_date",name:"start_date",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":a.start_date}]),modelValue:S.editedGroup.start_date,"onUpdate:modelValue":t[4]||(t[4]=e=>S.editedGroup.start_date=e)},null,8,["class","modelValue"]),(0,l.bF)(W,{name:"start_date",class:"error-feedback"})]),(0,l.Lk)("div",g,[h,(0,l.bF)(K,{id:"end_date",name:"end_date",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":a.end_date}]),modelValue:S.editedGroup.end_date,"onUpdate:modelValue":t[5]||(t[5]=e=>S.editedGroup.end_date=e)},null,8,["class","modelValue"]),(0,l.bF)(W,{name:"end_date",class:"error-feedback"})]),(0,l.Lk)("div",_,[(0,l.Lk)("table",y,[x,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(S.tableData,((t,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":e=>t.day_id=e},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.days,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.id},(0,o.v_)(e.text),9,C)))),128))],8,L),[[s.u1,t.day_id]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"time","onUpdate:modelValue":e=>t.starttime=e},null,8,F),[[s.Jo,t.starttime]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"time","onUpdate:modelValue":e=>t.endtime=e},null,8,A),[[s.Jo,t.endtime]])])])))),128))])]),(0,l.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>B.addRow&&B.addRow(...e))},"+")]),(0,l.Lk)("div",D,[G,(0,l.bF)(K,{id:"people_count",name:"people_count",type:"number",class:(0,o.C4)(["form-control",{"is-invalid":a.pc}]),modelValue:S.editedGroup.people_count,"onUpdate:modelValue":t[7]||(t[7]=e=>S.editedGroup.people_count=e)},null,8,["class","modelValue"]),(0,l.bF)(W,{name:"people_count",class:"error-feedback"})]),(0,l.Lk)("div",w,[(0,l.bF)($,{to:"/lgroups",class:"btn btn-secondary ml-2 float-start"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1}),(0,l.Lk)("button",{type:"button",class:"btn btn-danger mx-2 float-end",onClick:t[8]||(t[8]=(...e)=>B.deleteGroup&&B.deleteGroup(...e))}," Удалить группу "),(0,l.Lk)("button",{class:"btn btn-primary btn-block float-end",disabled:e.loading},[(0,l.bo)((0,l.Lk)("span",V,null,512),[[s.aG,e.loading]]),(0,l.eW)(" Обновить группу ")],8,E)])])])),_:1},8,["onSubmit","validation-schema"]),I,R,P,(0,l.Lk)("div",U,[(0,l.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>r.changeFilterStatus&&r.changeFilterStatus(...e))}," Тест"),(0,l.bF)(z,{class:"ag-theme-alpine",style:{width:"100%",height:"100%"},columnDefs:r.columnDefs.value,rowData:r.rowData.value,defaultColDef:r.defaultColDef,isExternalFilterPresent:r.isExternalFilterPresent,doesExternalFilterPass:r.doesExternalFilterPass,rowSelection:"multiple",animateRows:"true",onCellClicked:r.cellWasClicked,onGridReady:r.onGridReady,onFirstDataRendered:B.onFirstDataRendered},null,8,["columnDefs","rowData","defaultColDef","isExternalFilterPresent","doesExternalFilterPass","onCellClicked","onGridReady","onFirstDataRendered"])])])):((0,l.uX)(),(0,l.CE)("div",X,N)),e.message?((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,o.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,o.v_)(e.message),3)):(0,l.Q3)("",!0)])}a(4114);var K=a(7277),W=a(144),T=a(624),$=a(1654),j=a(7870),z=a(482),J=a(9041),M=a(619),Q=a(7411),H={name:"App",components:{AgGridVue:K.b,ButtonCell:T.A,ListenerHref:$.A,ListenerHref2:j.A,Form:z.lV,Field:z.D0,ErrorMessage:z.Kw},setup(){const e=(0,Q.dj)(),t=(0,W.KR)(null),a=(0,W.KR)(),o=60;let s=(0,W.KR)(!1);const r=()=>{s=!s,c()},n=e=>{t.value=e.api,a.value=e.columnApi},d=()=>{},i=(0,W.Kh)({}),u=(0,W.Kh)({value:[{sortable:!1,filter:!1,headerName:"Действия",cellRenderer:"ButtonCell",cellRendererParams:{onClick:d,label:"View Details"},maxWidth:120,resizable:!1},{field:"full_name",headerName:"ФИО"},{field:"people_count",headerName:"Желаемое количество человек"},{field:"start_date",headerName:"Дата начала"},{field:"end_date",headerName:"Дата окончания"},{field:"phone_number",headerName:"Номер телефона",hide:!0},{field:"email",headerName:"Email",hide:!0},{field:"full_name2",headerName:"ФИО законного представителя",hide:!0}]}),c=()=>{t.value.onFilterChanged()},m=()=>!0,p=e=>(console.log(e),console.log(),!s||!e.data||(console.log(),e.data.people_count==document.getElementById("people_count").value)),f={sortable:!0,filter:!0,flex:1,resizable:!0,minWidth:300};(0,l.sV)((()=>{}));const b=()=>{t.value.setQuickFilter(document.getElementById("filter-text-box").value)};return{onGridReady:n,columnDefs:u,rowData:i,defaultColDef:f,cellWasClicked:e=>{console.log("cell was clicked",e)},deselectRows:()=>{t.value.deselectAll()},paginationPageSize:o,onFilterTextBoxChanged:b,navigateToStudent:d,toast:e,isExternalFilterPresent:m,externalFilterChanged:c,doesExternalFilterPass:p,filterActive:s,changeFilterStatus:r}},data(){const e=J.Ik().shape({});return{schema:e,dataLoading:!1,group:null,editedGroup:null,profiles:null,directions:null,show:!1,programs:null,tableData:[],table_new_rows:!1}},methods:{async deleteGroup(){try{this.loading=!0;const e=await M.A.deleteLgroupById(this.profile.prof_id);e.data,this.loading=!1,this.toast.success("Успешно удалили!"),this.$router.push("/profiles")}catch(e){console.error("Ошибка загрузки данных",e)}},addRow(){const e={day_id:"",starttime:"",endtime:""};this.tableData.push(e),this.table_new_rows=!0},showlst(){},onFirstDataRendered(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.gridApi.onFilterChanged()},async loadListenersData(){try{const e=await M.A.getAllListenersWithoutGroup();this.rowData.value=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Error loading students data:",e)}},async updateGroup(){try{this.loading=!0;const e=this.$route.params.groupId,t=await M.A.updateLgroupById(e,this.editedGroup.group_number,this.editedGroup.group_program_id,this.editedGroup.hours,this.editedGroup.start_date,this.editedGroup.end_date,this.editedGroup.people_count,this.tableData,this.table_new_rows);t.data,this.group={...this.editedgroup},this.toast.success("Успешно обновили группу!")}catch(e){console.error("Ошибка загрузки данных о группе:",e)}},async loadGroupDetail(){const e=this.$route.params.groupId;try{const t=await M.A.getLgroupById(e);this.group=t.data,this.editedGroup={...t.data}}catch(t){console.error("Error",t)}},async loadProgramsData(){try{const e=await M.A.getProgramsAsIdText();this.programs=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Error:",e)}},async loadDaysData(){try{const e=await M.A.getDaysAsIdText();this.days=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Error loading data:",e)}},async load_gdays(){try{const e=this.$route.params.groupId,t=await M.A.getGDaysById(e);this.tableData=Array.isArray(t.data)?t.data:[t.data],console.log(this.tableData),this.dataLoading=!1}catch(e){console.error("Error loading data:",e)}}},created(){this.loadDaysData(),this.loadGroupDetail(),this.load_gdays(),this.loadProgramsData(),this.loadListenersData()}},O=a(1241);const q=(0,O.A)(H,[["render",B],["__scopeId","data-v-f17132b6"]]);var Y=q},624:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(6768);const o=e=>((0,l.Qi)("data-v-2054b495"),e=e(),(0,l.jt)(),e),s={class:"krasivsk"},r=o((()=>(0,l.Lk)("i",{class:"material-icons-outlined"},"visibility",-1)));function n(e,t,a,o,n,d){return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>d.onClick&&d.onClick(...e)),class:"btn btn-primary btn-sm"},[r,(0,l.eW)("Детали")])])}a(4114);var d={props:["params"],computed:{},methods:{onClick(){this.$router.push(`/listeners/${this.params.data.list_id}`)}}},i=a(1241);const u=(0,i.A)(d,[["render",n],["__scopeId","data-v-2054b495"]]);var c=u},1654:function(e,t,a){a.d(t,{A:function(){return u}});var l=a(6768),o=a(4232);const s=["href"];function r(e,t,a,r,n,d){return(0,l.uX)(),(0,l.CE)("a",{href:"#/lgroups?filterModel="+JSON.stringify({group_number:{filterType:"text",type:"contains",filter:this.params.data.group_number}})},(0,o.v_)(this.params.data.group_number),9,s)}var n={props:["params"],computed:{},methods:{}},d=a(1241);const i=(0,d.A)(n,[["render",r],["__scopeId","data-v-1dbeda58"]]);var u=i},7870:function(e,t,a){a.d(t,{A:function(){return u}});var l=a(6768),o=a(4232);const s=["href"];function r(e,t,a,r,n,d){return(0,l.uX)(),(0,l.CE)("a",{href:"#/contracts?filterModel="+JSON.stringify({listener_full_name:{filterType:"text",type:"contains",filter:this.params.data.full_name}})},(0,o.v_)(this.params.data.full_name),9,s)}var n={props:["params"],computed:{},methods:{}},d=a(1241);const i=(0,d.A)(n,[["render",r],["__scopeId","data-v-331bb5ae"]]);var u=i}}]);
//# sourceMappingURL=6374.ea1e2a05.js.map