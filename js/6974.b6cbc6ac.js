"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[6974],{6974:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var l=a(6768),d=a(4232),o=a(5130);const s=e=>((0,l.Qi)("data-v-50346f4c"),e=e(),(0,l.jt)(),e),i={class:"col-md-12 list"},c={key:0},n={class:"form-group d-inline-flex align-items-center mb-2"},r=s((()=>(0,l.Lk)("label",{for:"group_id"},"Группа:",-1))),u=["value"],m={class:"form-group d-inline-flex align-items-center float-none mb-2 col-3"},f=s((()=>(0,l.Lk)("label",{for:"subgroup"},"Подгруппа:",-1))),p={class:"form-group d-inline-flex align-items-center col-5 mb-2"},h=s((()=>(0,l.Lk)("label",{for:"audit_day_id"},"День недели",-1))),v=["value"],b={class:"form-group d-inline-flex align-items-center col-5 mb-2"},k=s((()=>(0,l.Lk)("label",{for:"audit_subject_id"},"Предмет",-1))),_=["value"],g={class:"form-group d-inline-flex align-items-center col-5 mb-2"},y=s((()=>(0,l.Lk)("label",{for:"audit_teacher_id"},"Преподаватель",-1))),x=["value"],S={class:"form-group d-inline-flex align-items-center col-5 mb-2"},V=s((()=>(0,l.Lk)("label",{for:"audit_para_id"},"Пара",-1))),A={id:"numberSelect"},F=["value"],C={class:"form-group d-inline-flex align-items-center col-10 mb-2"},E=s((()=>(0,l.Lk)("label",{for:"audit_subject_id"},"Аудитория",-1))),L=["value"],j={class:"form-group mt-3"},w={class:"form-group float-end"},I={class:"form-group mt-3"},D=["disabled"],X={class:"spinner-border spinner-border-sm"},U={key:1},T=(0,l.Fv)('<div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div><div class="form-group" data-v-50346f4c><label class="form-control skeleton-text skeleton-animate" data-v-50346f4c></label><input type="text" class="form-control skeleton skeleton-animate" data-v-50346f4c></div>',13),K=[T];function B(e,t,a,s,T,B){const G=(0,l.g2)("Select2"),M=(0,l.g2)("Field"),Q=(0,l.g2)("ErrorMessage"),W=(0,l.g2)("router-link"),O=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",i,[T.schedules?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(O,{onSubmit:B.updateSchedule,"validation-schema":T.schema},{default:(0,l.k6)((({errors:a})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",n,[r,(0,l.bF)(G,{class:(0,d.C4)({"form-control is-invalid":a.group_id}),modelValue:T.editedSchedule.group_id,"onUpdate:modelValue":t[0]||(t[0]=e=>T.editedSchedule.group_id=e),options:T.groups,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(M,{name:"group_id",as:"select",modelValue:T.editedSchedule.group_id,"onUpdate:modelValue":t[1]||(t[1]=e=>T.editedSchedule.group_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.groups,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,d.v_)(e.text),9,u)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(Q,{name:"group_id",class:"error-feedback"})]),(0,l.Lk)("div",m,[f,(0,l.bF)(M,{name:"subgroup",type:"text",class:(0,d.C4)(["form-control",{"is-invalid":a.subgroup}]),modelValue:T.editedSchedule.subgroup,"onUpdate:modelValue":t[2]||(t[2]=e=>T.editedSchedule.subgroup=e)},null,8,["class","modelValue"]),(0,l.bF)(Q,{name:"subgroup",class:"error-feedback"})]),(0,l.Lk)("div",p,[h,(0,l.bF)(G,{class:(0,d.C4)(["col-5",{"form-control is-invalid":a.day_id}]),modelValue:T.editedSchedule.day_id,"onUpdate:modelValue":t[3]||(t[3]=e=>T.editedSchedule.day_id=e),options:e.days,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(M,{name:"audit_day_id",as:"select",modelValue:T.editedSchedule.day_id,"onUpdate:modelValue":t[4]||(t[4]=e=>T.editedSchedule.day_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.days,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,d.v_)(e.text),9,v)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(Q,{name:"audit_day_id",class:"error-feedback"})]),(0,l.Lk)("div",b,[k,(0,l.bF)(G,{class:(0,d.C4)(["col-10",{"form-control is-invalid":a.subject_id}]),modelValue:T.editedSchedule.subject_id,"onUpdate:modelValue":t[5]||(t[5]=e=>T.editedSchedule.subject_id=e),options:e.subjects,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(M,{name:"audit_subject_id",as:"select",modelValue:T.editedSchedule.subject_id,"onUpdate:modelValue":t[6]||(t[6]=e=>T.editedSchedule.subject_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.subjects,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,d.v_)(e.text),9,_)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(Q,{name:"audit_prof_id",class:"error-feedback"})]),(0,l.Lk)("div",g,[y,(0,l.bF)(G,{class:(0,d.C4)(["col-10",{"form-control is-invalid":a.teacher_id}]),modelValue:T.editedSchedule.teacher_id,"onUpdate:modelValue":t[7]||(t[7]=e=>T.editedSchedule.teacher_id=e),options:T.teachers,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(M,{name:"audit_teacher_id",as:"select",modelValue:T.editedSchedule.teacher_id,"onUpdate:modelValue":t[8]||(t[8]=e=>T.editedSchedule.teacher_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.teachers,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,d.v_)(e.text),9,x)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(Q,{name:"audit_prof_id",class:"error-feedback"})]),(0,l.Lk)("div",S,[V,(0,l.Lk)("select",A,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.options,(e=>((0,l.uX)(),(0,l.CE)("option",{value:e.value,key:e.value},(0,d.v_)(e.label),9,F)))),128))])]),(0,l.Lk)("div",C,[E,(0,l.bF)(G,{class:(0,d.C4)(["col-5",{"form-control is-invalid":a.aud_id}]),modelValue:T.editedSchedule.aud_id,"onUpdate:modelValue":t[9]||(t[9]=e=>T.editedSchedule.aud_id=e),options:T.auditorium,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(M,{name:"audit_id",as:"select",modelValue:T.editedSchedule.aud_id,"onUpdate:modelValue":t[10]||(t[10]=e=>T.editedSchedule.aud_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.auditorium,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,d.v_)(e.text),9,L)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(Q,{name:"audit_aud_id",class:"error-feedback"})]),(0,l.Lk)("div",j,[(0,l.bF)(W,{to:"/audits",class:"mx-2 btn btn-secondary float-start"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1})]),(0,l.Lk)("div",w,[(0,l.Lk)("button",{class:"btn btn-danger float-end",onClick:t[11]||(t[11]=(...e)=>B.deleteAudit&&B.deleteAudit(...e))}," Удалить аудиторию ")]),(0,l.Lk)("div",I,[(0,l.Lk)("button",{class:"btn btn-primary btn-block",disabled:T.loading},[(0,l.bo)((0,l.Lk)("span",X,null,512),[[o.aG,T.loading]]),(0,l.eW)(" Обновить аудиторию ")],8,D)])])])),_:1},8,["onSubmit","validation-schema"])])):((0,l.uX)(),(0,l.CE)("div",U,K)),e.message?((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,d.C4)(["alert",T.successful?"alert-success":"alert-danger"])},(0,d.v_)(e.message),3)):(0,l.Q3)("",!0)])}a(4114);var G=a(482),M=a(9041),Q=a(619),W=a(7411);document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("numberSelect");for(let t=1;t<=8;t++){const a=document.createElement("option");a.value=t,a.textContent=t,e.appendChild(a)}}));var O={setup(){const e=(0,W.dj)();return{toast:e}},components:{Form:G.lV,Field:G.D0,ErrorMessage:G.Kw},data(){const e=M.Ik().shape({});return{schema:e,loading:!1,successful:!1,schedules:null,groups:null,editedSchedule:null,profiles:null,directions:null,options:[],auditorium:null,teachers:null}},mounted(){for(let e=1;e<=8;e++)this.options.push({value:e,label:e})},methods:{async loadAuditoriumData(){const e=this.$route.params.scheduleId;try{const t=await Q.A.getAuditById(e);this.schedules=t.data,this.editedSchedule={...t.data}}catch(t){console.error("Error",t)}},async updateSchedule(){try{this.loading=!0;const e=await Q.A.updateScheduleById(this.schedules.t_id,this.editedSchedule.aud_id,this.editedSchedule.day_id,this.editedSchedule.subject_id,this.editedSchedule.teacher_id,this.editedSchedule.group_id);e.data,this.schedules={...this.editedSchedule},this.loading=!1,this.toast.success("Успешно обновили аудиторию!")}catch(e){console.error("Ошибка загрузки данных :",e)}},async deleteAudit(){try{this.loading=!0;const e=await Q.A.deleteScheduleById(this.schedules.schedule_id);e.data,this.schedules={...this.editedSchedule},this.loading=!1,this.toast.success("Успешно удалили аудиторию!")}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadGroupsData(){try{const e=await Q.A.getGroupsAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных :",e)}},async loadDaysData(){try{const e=await Q.A.getDaysAsIdText();this.days=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Error:",e)}},async loadAuditData(){try{const e=await Q.A.getAuditAsIdText();this.auditorium=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Error:",e)}},async loadTeachersData(){try{const e=await Q.A.getTeachersAsIdText();this.teachers=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Error:",e)}},async loadSubjectsData(){try{const e=await Q.A.getSubjectAsIdText();this.subjects=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Error:",e)}}},created(){this.loadDaysData(),this.loadSubjectsData(),this.loadGroupsData(),this.loadAuditData(),this.loadTeachersData(),this.loadAuditoriumData()}},$=a(1241);const q=(0,$.A)(O,[["render",B],["__scopeId","data-v-50346f4c"]]);var z=q}}]);
//# sourceMappingURL=6974.b6cbc6ac.js.map