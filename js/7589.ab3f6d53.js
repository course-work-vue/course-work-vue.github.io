"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[7589],{7589:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});var s=t(6768),l=t(4232),r=t(5130);const o=e=>((0,s.Qi)("data-v-52104c02"),e=e(),(0,s.jt)(),e),c={class:"col-md-12 list"},n={key:0},i={class:"form-group d-inline-flex align-items-center col-12 mb-2"},d=o((()=>(0,s.Lk)("label",{class:"col-form-label",for:"last_name"},"Фамилия:",-1))),m={class:"form-group d-inline-flex align-items-center col-12 mb-2"},u=o((()=>(0,s.Lk)("label",{for:"first_name"},"Имя:",-1))),h={class:"form-group d-inline-flex align-items-center col-12 mb-2"},f=o((()=>(0,s.Lk)("label",{for:"patronymic"},"Отчество:",-1))),p={class:"form-group mt-3"},b={class:"form-group float-end"},v={class:"form-group mt-3"},k=["disabled"],g={class:"spinner-border spinner-border-sm"},y={key:1},_=(0,s.Fv)('<div class="form-group" data-v-52104c02><label class="form-control skeleton-text skeleton-animate" data-v-52104c02></label><input type="text" class="form-control skeleton skeleton-animate" data-v-52104c02></div><div class="form-group" data-v-52104c02><label class="form-control skeleton-text skeleton-animate" data-v-52104c02></label><input type="text" class="form-control skeleton skeleton-animate" data-v-52104c02></div><div class="form-group" data-v-52104c02><label class="form-control skeleton-text skeleton-animate" data-v-52104c02></label><input type="text" class="form-control skeleton skeleton-animate" data-v-52104c02></div>',3),T=[_];function x(e,a,t,o,_,x){const F=(0,s.g2)("Field"),L=(0,s.g2)("ErrorMessage"),C=(0,s.g2)("router-link"),V=(0,s.g2)("Form");return(0,s.uX)(),(0,s.CE)("div",c,[_.teacher?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(V,{onSubmit:x.updateTeacher,"validation-schema":_.schema},{default:(0,s.k6)((({errors:e})=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",i,[d,(0,s.bF)(F,{name:"last_name",id:"last_name",type:"text",value:"",class:(0,l.C4)(["form-control",{"is-invalid":e.last_name}]),modelValue:_.editedTeacher.last_name,"onUpdate:modelValue":a[0]||(a[0]=e=>_.editedTeacher.last_name=e)},null,8,["class","modelValue"]),(0,s.bF)(L,{name:"last_name",class:"error-feedback"})]),(0,s.Lk)("div",m,[u,(0,s.bF)(F,{name:"first_name",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":e.first_name}]),value:"",modelValue:_.editedTeacher.first_name,"onUpdate:modelValue":a[1]||(a[1]=e=>_.editedTeacher.first_name=e)},null,8,["class","modelValue"]),(0,s.bF)(L,{name:"first_name",class:"error-feedback"})]),(0,s.Lk)("div",h,[f,(0,s.bF)(F,{name:"patronymic",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":e.patronymic}]),value:"",modelValue:_.editedTeacher.patronymic,"onUpdate:modelValue":a[2]||(a[2]=e=>_.editedTeacher.patronymic=e)},null,8,["class","modelValue"]),(0,s.bF)(L,{name:"patronymic",class:"error-feedback"})]),(0,s.Lk)("div",p,[(0,s.bF)(C,{to:"/teachers",class:"mx-2 btn btn-secondary float-start"},{default:(0,s.k6)((()=>[(0,s.eW)("Отмена")])),_:1})]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{class:"btn btn-danger float-end",onClick:a[3]||(a[3]=(...e)=>x.deleteTeacher&&x.deleteTeacher(...e))}," Удалить преподавателя ")]),(0,s.Lk)("div",v,[(0,s.Lk)("button",{class:"btn btn-primary btn-block",disabled:_.loading},[(0,s.bo)((0,s.Lk)("span",g,null,512),[[r.aG,_.loading]]),(0,s.eW)(" Обновить преподавателя ")],8,k)])])])),_:1},8,["onSubmit","validation-schema"])])):((0,s.uX)(),(0,s.CE)("div",y,T)),e.message?((0,s.uX)(),(0,s.CE)("div",{key:2,class:(0,l.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,l.v_)(e.message),3)):(0,s.Q3)("",!0)])}var F=t(482),L=t(9041),C=t(619),V=t(7411),w={setup(){const e=(0,V.dj)();return{toast:e}},components:{Form:F.lV,Field:F.D0,ErrorMessage:F.Kw},data(){const e=L.Ik().shape({});return{schema:e,loading:!1,teacher:null,editedTeacher:null,groups:null}},methods:{async loadTeacherDetail(){const e=this.$route.params.teacherId;try{const a=await C.A.getTeacherById(e);this.teacher=a.data,this.editedTeacher={...a.data}}catch(a){console.error("Error loading teacher details:",a)}},async updateTeacher(){try{this.loading=!0;const e=await C.A.updateTeacherById(this.teacher.teacher_id,this.editedTeacher.first_name,this.editedTeacher.last_name,this.editedTeacher.patronymic);e.data,this.teacher={...this.editedTeacher},this.loading=!1,this.toast.success("Успешно обновили преподавателя!")}catch(e){console.error("Ошибка загрузки данных о преподавателе:",e)}},async deleteTeacher(){try{this.loading=!0;const e=await C.A.deleteTeacherById(this.teacher.teacher_id);e.data,this.teacher={...this.editedTeacher},this.loading=!1,this.toast.success("Успешно удалили преподавателя!")}catch(e){console.error("Ошибка загрузки данных о преподавателе:",e)}},async loadTegrsusData(){try{const e=await C.A.getTegrsusAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных о связи:",e)}}},created(){this.loadTegrsusData(),this.loadTeacherDetail()}},A=t(1241);const E=(0,A.A)(w,[["render",x],["__scopeId","data-v-52104c02"]]);var I=E}}]);
//# sourceMappingURL=7589.ab3f6d53.js.map