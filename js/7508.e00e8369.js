"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[7508],{7508:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var i=a(6768),l=a(5130);const r=e=>((0,i.Qi)("data-v-533b25b5"),e=e(),(0,i.jt)(),e),n={class:"col col-xs-9 col-lg-12 mt-4 list"},o={class:"col col-12"},s={class:"mb-3 col col-12"},d=r((()=>(0,i.Lk)("i",{class:"material-icons-outlined"},null,-1))),u={class:"col col-6 float-end d-inline-flex align-items-center mb-2"},c=["disabled"],h=r((()=>(0,i.Lk)("i",{class:"material-icons-outlined"},"close",-1))),p={style:{height:"80vh"}},f={class:"h-100 pt-5"};function m(e,t,a,r,m,g){const b=(0,i.g2)("ag-grid-vue");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",o,[(0,i.Lk)("div",s,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>g.exportExcel&&g.exportExcel(...e)),class:"btn btn-primary float-start",type:"button"},[d,(0,i.eW)("Сформировать отчёт")]),(0,i.Lk)("div",u,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>g.clearFilters&&g.clearFilters(...e)),disabled:!m.filters,class:"btn btn-sm btn-primary text-nowrap mx-2",type:"button"},[h,(0,i.eW)("Очистить фильтры")],8,c),(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>m.quickFilterValue=e),id:"filter-text-box",onInput:t[3]||(t[3]=e=>r.onFilterTextBoxChanged()),placeholder:"Поиск..."},null,544),[[l.Jo,m.quickFilterValue]])])])]),(0,i.Lk)("div",p,[(0,i.Lk)("div",f,[(0,i.bF)(b,{class:"ag-theme-alpine",style:{width:"100%",height:"100%"},columnDefs:r.columnDefs.value,rowData:r.rowData.value,getRowStyle:e.getRowStyle,"pinned-top-row-data":m.pinnedTopRowData,"pinned-bottom-row-data":m.pinnedBottomRowData,defaultColDef:r.defaultColDef,rowSelection:"multiple",animateRows:"true",onCellClicked:r.cellWasClicked,onGridReady:r.onGridReady,onFirstDataRendered:g.onFirstDataRendered,onFilterChanged:g.onFilterChanged,pagination:!0,paginationPageSize:r.paginationPageSize},null,8,["columnDefs","rowData","getRowStyle","pinned-top-row-data","pinned-bottom-row-data","defaultColDef","onCellClicked","onGridReady","onFirstDataRendered","onFilterChanged","paginationPageSize"])])])])}a(4114);var g=a(7277),b=a(144),k=a(8479),v=a(4232);const w=["href"];function F(e,t,a,l,r,n){return(0,i.uX)(),(0,i.CE)("a",{href:"/journals/"+this.params.data.group_id},(0,v.v_)(this.params.data.group_number),9,w)}var y={props:["params"],computed:{},methods:{}},C=a(1241);const x=(0,C.A)(y,[["render",F],["__scopeId","data-v-aea146e6"]]);var D=x,_=a(619),A={name:"App",components:{AgGridVue:g.b,ButtonCell:k.A,JournalHref:D},setup(){const e=(0,b.KR)(null),t=(0,b.KR)(),a=60,l=a=>{e.value=a.api,t.value=a.columnApi},r=()=>{},n=(0,b.Kh)({}),o=(0,b.Kh)({value:[{field:"group_number",headerName:"number",hide:!0},{field:"group_id",headerName:"id",hide:!0},{field:"full_name",headerName:"ФИО",pinned:"left",minWidth:300},{field:"date",headerName:"12.10.2023",width:200,flex:1,children:[{field:"status",editable:!0,headerName:"Пр",maxWidth:100},{field:"grade",editable:!0,headerName:"Т/к",maxWidth:100}]},{valueGetter:e=>e.data.grade,valueSetter:e=>(e.data.grade=e.newValue,!0),hide:!0},{field:"Result",headerName:"Итого",pinned:"right",width:300,children:[{field:"kol-vopra",headerName:"Всего пропусков",pinned:"right",width:150,valueGetter:s},{field:"Sredn",headerName:"Ср. балл",pinned:"right",width:150,valueGetter:d}]}]});function s(e){if("н"==e.data.status)return 1}function d(e){return e.data.grade}const u={sortable:!0,filter:!0,resizable:!0};(0,i.sV)((()=>{}));const c=()=>{e.value.setQuickFilter(document.getElementById("filter-text-box").value)};return{onGridReady:l,columnDefs:o,rowData:n,defaultColDef:u,cellWasClicked:e=>{console.log("cell was clicked",e)},deselectRows:()=>{e.value.deselectAll()},onFilterTextBoxChanged:c,paginationPageSize:a,navigateToJournal:r}},data(){return{quickFilterValue:"",filters:!1,pinnedTopRowData:null,pinnedBottomRowData:null}},methods:{exportExcel(){a.e(9305).then(a.t.bind(a,9305,23)).then((e=>{this.$store.dispatch("journal/GET_JOURNAL").then((t=>{console.log(t.data.journal);const a=t.data.journal,i=["FIO","Date","Status","Grade"],l=["full_name","date","status","grade"],r=this.FormatJSon(l,a);e.export_json_to_excel({header:i,date:r,sheetName:"Name Of Sheets",filename:"journal",autoWidth:!0,bookType:"xlsx"})}))}))},FormatJSon(e,t){return t.map((t=>e.map((e=>t[e]))))},async loadJournalsData(){try{const e=await _.A.getAllJournals();this.rowData.value=Array.isArray(e.data)?e.data:[e.data],this.loading=!1}catch(e){console.error("Error loading journal data:",e)}},navigateToUpdateJournal(){this.$router.push("/updateJournal")},onFirstDataRendered(e){this.gridApi=e.api,this.columnApi=e.columnApi;const t=this.$route.query.filterModel;if(t){const e=JSON.parse(t);this.gridApi.setFilterModel(e),this.filters=!0}const a=this.$route.query.quickFilter;if(a){const e=JSON.parse(a);this.gridApi.setQuickFilter(e),this.quickFilterValue=e,this.filters=!0}},onFilterChanged(){this.filters=!1;const e=this.gridApi.getQuickFilter(),t=this.gridApi.getFilterModel(),a={};e&&(a.quickFilter=JSON.stringify(e),this.filters=!0),t&&Object.keys(t).length>0&&(a.filterModel=JSON.stringify(t),this.filters=!0),this.$router.push({query:a})},clearFilters(){this.gridApi.setFilterModel(),this.gridApi.setQuickFilter(),this.quickFilterValue="",this.filters=!1}},created(){this.loadJournalsData()}};const R=(0,C.A)(A,[["render",m],["__scopeId","data-v-533b25b5"]]);var S=R},8479:function(e,t,a){a.d(t,{A:function(){return c}});var i=a(6768);const l=e=>((0,i.Qi)("data-v-10d0b7ff"),e=e(),(0,i.jt)(),e),r={class:"krasivsk"},n=l((()=>(0,i.Lk)("i",{class:"material-icons-outlined"},"visibility",-1)));function o(e,t,a,l,o,s){return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e)),class:"btn btn-primary btn-sm"},[n,(0,i.eW)("Детали")])])}a(4114);var s={props:["params"],computed:{},methods:{onClick(){this.$router.push(`/tegrsus/${this.params.data.tergsu_id}`)}}},d=a(1241);const u=(0,d.A)(s,[["render",o],["__scopeId","data-v-10d0b7ff"]]);var c=u}}]);
//# sourceMappingURL=7508.e00e8369.js.map