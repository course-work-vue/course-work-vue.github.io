"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[7301],{7301:function(a,e,t){t.r(e),t.d(e,{default:function(){return w}});var s=t(6768),o=t(4232),l=t(5130);const r=a=>((0,s.Qi)("data-v-04bc2ab3"),a=a(),(0,s.jt)(),a),n={class:"list"},i={key:0},d=(0,s.Fv)('<div class="form-group" data-v-04bc2ab3><label class="form-control skeleton-text skeleton-animate" data-v-04bc2ab3></label><input type="text" class="form-control skeleton skeleton-animate" data-v-04bc2ab3></div><div class="form-group" data-v-04bc2ab3><label class="form-control skeleton-text skeleton-animate" data-v-04bc2ab3></label><input type="text" class="form-control skeleton skeleton-animate" data-v-04bc2ab3></div>',2),c=[d],u={key:1,class:"col-md-12"},m={class:"form-group d-inline-flex align-items-center mb-2 col-12"},b=r((()=>(0,s.Lk)("label",{for:"prof_dir_id"},"Направление: ",-1))),f=["value"],p={class:"form-group d-inline-flex align-items-center mb-2 col-12"},v=r((()=>(0,s.Lk)("label",{for:"prof_name"},"Название профиля: ",-1))),k={class:"form-group mt-3"},g=["disabled"],_={class:"spinner-border spinner-border-sm"};function h(a,e,t,r,d,h){const y=(0,s.g2)("Select2"),F=(0,s.g2)("Field"),V=(0,s.g2)("ErrorMessage"),C=(0,s.g2)("router-link"),L=(0,s.g2)("Form");return(0,s.uX)(),(0,s.CE)("div",n,[d.dataLoading?((0,s.uX)(),(0,s.CE)("div",i,c)):((0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(L,{onSubmit:h.addProfile,"validation-schema":d.schema},{default:(0,s.k6)((({errors:a})=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",m,[b,(0,s.bF)(y,{class:(0,o.C4)(["col-5",{"form-control is-invalid":a.prof_dir_id}]),modelValue:d.myValue,"onUpdate:modelValue":e[0]||(e[0]=a=>d.myValue=a),options:d.directions,settings:{theme:"bootstrap-5"}},null,8,["class","modelValue","options"]),(0,s.bF)(F,{name:"prof_dir_id",as:"select",modelValue:d.myValue,"onUpdate:modelValue":e[1]||(e[1]=a=>d.myValue=a),hidden:""},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.directions,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.id,value:a.id},(0,o.v_)(a.text),9,f)))),128))])),_:1},8,["modelValue"]),(0,s.bF)(V,{name:"prof_dir_id",class:"error-feedback"})]),(0,s.Lk)("div",p,[v,(0,s.bF)(F,{name:"prof_name",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":a.prof_name}])},null,8,["class"]),(0,s.bF)(V,{name:"prof_name",class:"error-feedback"})]),(0,s.Lk)("div",k,[(0,s.bF)(C,{to:"/profiles",class:"btn btn-secondary ml-2 float-start"},{default:(0,s.k6)((()=>[(0,s.eW)("Отмена")])),_:1}),(0,s.Lk)("button",{class:"btn btn-primary btn-block float-end",disabled:d.loading},[(0,s.bo)((0,s.Lk)("span",_,null,512),[[l.aG,d.loading]]),(0,s.eW)(" Добавить профиль ")],8,g)])])])),_:1},8,["onSubmit","validation-schema"]),d.message?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["alert",d.successful?"alert-success":"alert-danger"])},(0,o.v_)(d.message),3)):(0,s.Q3)("",!0)]))])}var y=t(482),F=t(9041),V=t(619),C=t(7411),L={setup(){const a=(0,C.dj)();return{toast:a}},name:"AddProfile",components:{Form:y.lV,Field:y.D0,ErrorMessage:y.Kw},data(){const a=F.Ik().shape({});return{successful:!1,loading:!1,dataLoading:!0,message:"",schema:a,directions:null,myValue:""}},computed:{},mounted(){},methods:{async addProfile(a){try{this.loading=!0;const e=await V.A.addProfile(a.prof_dir_id,a.prof_name);e.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили профиль!")}catch(e){this.message="Ошибка",this.toast.error("Ошибка добавления профиль"),console.error("Error:",e)}},async loadDirectionsData(){try{const a=await V.A.getDirectionsAsIdText();this.directions=Array.isArray(a.data)?a.data:[a.data],this.dataLoading=!1}catch(a){console.error("Error:",a)}}},created(){this.loadDirectionsData()}},E=t(1241);const x=(0,E.A)(L,[["render",h],["__scopeId","data-v-04bc2ab3"]]);var w=x}}]);
//# sourceMappingURL=7301.f4fcd5ac.js.map