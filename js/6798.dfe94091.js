"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[6798],{6798:function(a,e,t){t.r(e),t.d(e,{default:function(){return T}});var l=t(6768),o=t(4232),s=t(5130);const r=a=>((0,l.Qi)("data-v-5458ef1b"),a=a(),(0,l.jt)(),a),n={class:"list"},d={key:0},i=(0,l.Fv)('<div class="form-group" data-v-5458ef1b><label class="form-control skeleton-text skeleton-animate" data-v-5458ef1b></label><input type="text" class="form-control skeleton skeleton-animate" data-v-5458ef1b></div><div class="form-group" data-v-5458ef1b><label class="form-control skeleton-text skeleton-animate" data-v-5458ef1b></label><input type="text" class="form-control skeleton skeleton-animate" data-v-5458ef1b></div><div class="form-group" data-v-5458ef1b><label class="form-control skeleton-text skeleton-animate" data-v-5458ef1b></label><input type="text" class="form-control skeleton skeleton-animate" data-v-5458ef1b></div>',3),c=[i],u={key:1,class:"col-md-12"},m={class:"form-group d-inline-flex align-items-center col-5 mb-2"},b=r((()=>(0,l.Lk)("label",{for:"group_number"},"Номер группы:",-1))),p={class:"form-group d-inline-flex align-items-center col-5 mb-2"},f=r((()=>(0,l.Lk)("label",{for:"group_program_id"},"Программа:",-1))),g=["value"],k={class:"form-group d-inline-flex align-items-center col-5 mb-2"},v=r((()=>(0,l.Lk)("label",{for:"hours"},"Общее количество часов:",-1))),y={class:"col-5"},_={class:"table table-bordered col col-3"},h=r((()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"День"),(0,l.Lk)("th",null,"Время начала"),(0,l.Lk)("th",null,"Время окончания")])],-1))),L=["onUpdate:modelValue"],F=["value"],C=["onUpdate:modelValue"],V=["onUpdate:modelValue"],x={class:"form-group d-inline-flex align-items-center col-5 mb-2"},E=r((()=>(0,l.Lk)("label",{for:"start_date"},"Дата начала:",-1))),w={class:"form-group d-inline-flex align-items-center col-5 mb-2"},D=r((()=>(0,l.Lk)("label",{for:"end_date"},"Дата окончания:",-1))),A={class:"form-group d-inline-flex align-items-center col-5 mb-2"},X=r((()=>(0,l.Lk)("label",{for:"pc"},"Общее количество человек:",-1))),U={class:"form-group mt-3"},I=["disabled"],j={class:"spinner-border spinner-border-sm"};function G(a,e,t,r,i,G){const K=(0,l.g2)("Field"),P=(0,l.g2)("ErrorMessage"),R=(0,l.g2)("Select2"),S=(0,l.g2)("router-link"),J=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",n,[i.dataLoading?((0,l.uX)(),(0,l.CE)("div",d,c)):((0,l.uX)(),(0,l.CE)("div",u,[(0,l.bF)(J,{onSubmit:G.addGroup,"validation-schema":i.schema},{default:(0,l.k6)((({errors:a})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",m,[b,(0,l.bF)(K,{name:"group_number",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":a.group_number}])},null,8,["class"]),(0,l.bF)(P,{name:"group_number",class:"error-feedback"})]),(0,l.Lk)("div",p,[f,(0,l.bF)(R,{class:(0,o.C4)(["col-5",{"form-control is-invalid":a.group_program_id}]),modelValue:i.myValue,"onUpdate:modelValue":e[0]||(e[0]=a=>i.myValue=a),options:i.programs,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(K,{name:"group_program_id",as:"select",modelValue:i.myValue,"onUpdate:modelValue":e[1]||(e[1]=a=>i.myValue=a),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.programs,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,o.v_)(a.text),9,g)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(P,{name:"group_program_id",class:"error-feedback"})]),(0,l.Lk)("div",k,[v,(0,l.bF)(K,{name:"hours",type:"number",class:(0,o.C4)(["form-control",{"is-invalid":a.hours}])},null,8,["class"]),(0,l.bF)(P,{name:"hours",class:"error-feedback"})]),(0,l.Lk)("div",y,[(0,l.Lk)("table",_,[h,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.tableData,((a,e)=>((0,l.uX)(),(0,l.CE)("tr",{key:e},[(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":e=>a.day_id=e},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.days,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.value,value:a.id},(0,o.v_)(a.text),9,F)))),128))],8,L),[[s.u1,a.day_id]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"time","onUpdate:modelValue":e=>a.starttime=e},null,8,C),[[s.Jo,a.starttime]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"time","onUpdate:modelValue":e=>a.endtime=e},null,8,V),[[s.Jo,a.endtime]])])])))),128))])]),(0,l.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=(...a)=>G.addRow&&G.addRow(...a))},"+")]),(0,l.Lk)("div",x,[E,(0,l.bF)(K,{name:"start_date",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":a.start_date}])},null,8,["class"]),(0,l.bF)(P,{name:"start_date",class:"error-feedback"})]),(0,l.Lk)("div",w,[D,(0,l.bF)(K,{name:"end_date",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":a.end_date}])},null,8,["class"]),(0,l.bF)(P,{name:"end_date",class:"error-feedback"})]),(0,l.Lk)("div",A,[X,(0,l.bF)(K,{name:"pc",type:"number",class:(0,o.C4)(["form-control",{"is-invalid":a.pc}])},null,8,["class"]),(0,l.bF)(P,{name:"pc",class:"error-feedback"})]),(0,l.Lk)("div",U,[(0,l.bF)(S,{to:"/lgroups",class:"btn btn-secondary ml-2 float-start"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1}),(0,l.Lk)("button",{class:"btn btn-primary btn-block float-end",disabled:i.loading},[(0,l.bo)((0,l.Lk)("span",j,null,512),[[s.aG,i.loading]]),(0,l.eW)(" Добавить группу ")],8,I)])])])),_:1},8,["onSubmit","validation-schema"]),i.message?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)(["alert",i.successful?"alert-success":"alert-danger"])},(0,o.v_)(i.message),3)):(0,l.Q3)("",!0)]))])}t(4114);var K=t(482),P=t(9041),R=t(619),S=t(7411),J={setup(){const a=(0,S.dj)();return{toast:a}},name:"AddGroup",components:{Form:K.lV,Field:K.D0,ErrorMessage:K.Kw},data(){const a=P.Ik().shape({});return{successful:!1,loading:!1,dataLoading:!0,message:"",schema:a,groups:null,profiles:null,directions:null,programs:null,myValue:"",tableData:[],days:null}},computed:{},mounted(){},methods:{addRow(){const a={day_id:"",starttime:"",endtime:""};this.tableData.push(a)},async addGroup(a){try{this.loading=!0;const e=await R.A.addLgroup(a.group_number,a.group_program_id,a.hours,a.start_date,a.end_date,a.pc,this.tableData);e.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили группу!")}catch(e){this.message="Ошибка",this.toast.error("Ошибка добавления группы"),console.error("Error:",e)}},async loadProgramsData(){try{const a=await R.A.getProgramsAsIdText();this.programs=Array.isArray(a.data)?a.data:[a.data],this.dataLoading=!1}catch(a){console.error("Error:",a)}},async loadDaysData(){try{const a=await R.A.getDaysAsIdText();this.days=Array.isArray(a.data)?a.data:[a.data],this.dataLoading=!1}catch(a){console.error("Error loading data:",a)}}},created(){this.loadDaysData(),this.loadProgramsData()}},M=t(1241);const Q=(0,M.A)(J,[["render",G],["__scopeId","data-v-5458ef1b"]]);var T=Q}}]);
//# sourceMappingURL=6798.dfe94091.js.map