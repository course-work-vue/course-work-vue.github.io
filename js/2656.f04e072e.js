"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[2656],{2656:function(a,e,t){t.r(e),t.d(e,{default:function(){return Q}});var l=t(6768),s=t(4232),o=t(5130);const n=a=>((0,l.Qi)("data-v-62692c44"),a=a(),(0,l.jt)(),a),c={class:"list"},r={key:0},i=(0,l.Fv)('<div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div><div class="form-group" data-v-62692c44><label class="form-control skeleton-text skeleton-animate" data-v-62692c44></label><input type="text" class="form-control skeleton skeleton-animate" data-v-62692c44></div>',9),d=[i],m={key:1,class:"col-md-12"},u={class:"form-group d-inline-flex align-items-center col-5 mb-2"},v=n((()=>(0,l.Lk)("label",{for:"contract_id"},"Номер договора",-1))),f=["value"],b={class:"form-group d-inline-flex align-items-center mb-2"},k=n((()=>(0,l.Lk)("label",{for:"expiration_date"},"Дата просрочки:",-1))),p={class:"form-group d-inline-flex align-items-center mb-2"},g=n((()=>(0,l.Lk)("label",{for:"date_40"},"Дата оплаты 40%:",-1))),_={class:"form-group d-inline-flex align-items-center mb-2 col-6"},y=n((()=>(0,l.Lk)("label",{for:"all_sum"},"Вся сумма:",-1))),x={class:"form-group d-inline-flex align-items-center mb-2 col-5"},h=n((()=>(0,l.Lk)("label",{for:"deposited_amount"},"Внесённая сумма:",-1))),F={class:"form-group d-inline-flex align-items-center mb-2 col-5"},L=n((()=>(0,l.Lk)("label",{for:"left_to_pay"},"Остаточная сумма:",-1))),C={class:"form-group d-inline-flex align-items-center mb-2 col-6"},V=n((()=>(0,l.Lk)("label",{for:"bank"},"Банк:",-1))),E={class:"form-group mt-3"},w=["disabled"],A={class:"spinner-border spinner-border-sm"};function X(a,e,t,n,i,X){const j=(0,l.g2)("Select2"),I=(0,l.g2)("Field"),D=(0,l.g2)("ErrorMessage"),P=(0,l.g2)("router-link"),S=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",c,[i.dataLoading?((0,l.uX)(),(0,l.CE)("div",r,d)):((0,l.uX)(),(0,l.CE)("div",m,[(0,l.bF)(S,{onSubmit:X.addPayment,"validation-schema":i.schema},{default:(0,l.k6)((({errors:t})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",u,[v,(0,l.bF)(j,{class:(0,s.C4)(["col-5",{"form-control is-invalid":t.contract_id}]),modelValue:a.myValue3,"onUpdate:modelValue":e[0]||(e[0]=e=>a.myValue3=e),options:i.contracts,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(I,{name:"contract_id",as:"select",modelValue:a.myValue3,"onUpdate:modelValue":e[1]||(e[1]=e=>a.myValue3=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.contracts,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.text),9,f)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(D,{name:"contract_id",class:"error-feedback"})]),(0,l.Lk)("div",b,[k,(0,l.bF)(I,{name:"expiration_date",type:"date",class:(0,s.C4)(["form-control",{"is-invalid":t.expiration_date}]),value:""},null,8,["class"]),(0,l.bF)(D,{name:"expiration_date",class:"error-feedback"})]),(0,l.Lk)("div",p,[g,(0,l.bF)(I,{name:"date_40",type:"date",class:(0,s.C4)(["form-control",{"is-invalid":t.date_40}]),value:""},null,8,["class"]),(0,l.bF)(D,{name:"date_40",class:"error-feedback"})]),(0,l.Lk)("div",_,[y,(0,l.bF)(I,{name:"all_sum",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":t.all_sum}]),value:""},null,8,["class"]),(0,l.bF)(D,{name:"all_sum",class:"error-feedback"})]),(0,l.Lk)("div",x,[h,(0,l.bF)(I,{name:"deposited_amount",type:"number",class:(0,s.C4)(["form-control",{"is-invalid":t.deposited_amount}]),value:""},null,8,["class"]),(0,l.bF)(D,{name:"deposited_amount",class:"error-feedback"})]),(0,l.Lk)("div",F,[L,(0,l.bF)(I,{name:"left_to_pay",type:"number",class:(0,s.C4)(["form-control",{"is-invalid":t.left_to_pay}]),value:""},null,8,["class"]),(0,l.bF)(D,{name:"left_to_pay",class:"error-feedback"})]),(0,l.Lk)("div",C,[V,(0,l.bF)(I,{name:"bank",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":t.bank}]),value:""},null,8,["class"]),(0,l.bF)(D,{name:"bank",class:"error-feedback"})])]),(0,l.Lk)("div",E,[(0,l.Lk)("button",{class:"btn btn-primary btn-block",disabled:i.loading},[(0,l.bo)((0,l.Lk)("span",A,null,512),[[o.aG,i.loading]]),(0,l.eW)(" Добавить платёж ")],8,w),(0,l.bF)(P,{to:"/payments",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1})])])),_:1},8,["onSubmit","validation-schema"]),i.message?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,s.C4)(["alert",i.successful?"alert-success":"alert-danger"])},(0,s.v_)(i.message),3)):(0,l.Q3)("",!0)]))])}var j=t(482),I=t(9041),D=t(619),P=t(7411),S={setup(){const a=(0,P.dj)();return{toast:a}},name:"AddContract",components:{Form:j.lV,Field:j.D0,ErrorMessage:j.Kw},data(){const a=I.Ik().shape({});return{successful:!1,loading:!1,dataLoading:!1,message:"",schema:a,listeners:null,payers:null,programs:null,contracts:null}},computed:{},mounted(){},methods:{async addPayment(a){try{this.loading=!0;const e=await D.A.addPayment(a.contract_id,a.expiration_date,a.date_40,a.all_sum,a.deposited_amount,a.left_to_pay,a.bank);e.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили платёж!")}catch(e){this.message="Ошибка",this.toast.error("Ошибка добавления платежа"),console.error("Error updating contract details:",e)}},async loadContractsData(){try{const a=await D.A.getContractsAsIdText();this.contracts=Array.isArray(a.data)?a.data:[a.data],this.dataLoading=!1}catch(a){console.error("Ошибка загрузки данных:",a)}}},created(){this.loadContractsData()}},K=t(1241);const M=(0,K.A)(S,[["render",X],["__scopeId","data-v-62692c44"]]);var Q=M}}]);
//# sourceMappingURL=2656.f04e072e.js.map