"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[2858],{2858:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var l=a(6768),s=a(4232),i=a(5130);const d=e=>((0,l.Qi)("data-v-32d3c894"),e=e(),(0,l.jt)(),e),c={class:"col col-xs-9 col-lg-12 mt-4 offset-md-1"},r={class:"col col-10 align-self-end"},n={key:0,class:"table"},u=d((()=>(0,l.Lk)("td",null,[(0,l.Lk)("div",{class:"skeleton skeleton-animate"})],-1))),o=d((()=>(0,l.Lk)("td",null,[(0,l.Lk)("div",{class:"skeleton skeleton-animate"})],-1))),h=d((()=>(0,l.Lk)("td",null,[(0,l.Lk)("div",{class:"skeleton skeleton-animate"})],-1))),k=d((()=>(0,l.Lk)("td",null,[(0,l.Lk)("div",{class:"skeleton skeleton-animate"})],-1))),b=d((()=>(0,l.Lk)("td",null,[(0,l.Lk)("div",{class:"skeleton skeleton-animate"})],-1))),m=d((()=>(0,l.Lk)("td",null,[(0,l.Lk)("div",{class:"skeleton skeleton-animate"})],-1))),L=[u,o,h,k,b,m],y={key:1},v={class:"d-flex"},p={class:"table",id:"table_teacher"},_=d((()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Преподаватель")])],-1))),g=["onClick"],A={key:0},C={class:"table",id:"table_tsch"},T=d((()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"День недели"),(0,l.Lk)("th",null,"Пара"),(0,l.Lk)("th",null,"Группа"),(0,l.Lk)("th",null,"Предмет")])],-1))),f=["onClick"],E={key:1},w={class:"table",id:"table_audit"},X=d((()=>(0,l.Lk)("h5",null,"Список аудиторий:",-1))),D=["onClick"],S=["disabled"],j={class:"spinner-border spinner-border-sm"};function F(e,t,a,d,u,o){const h=(0,l.g2)("router-link"),k=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("div",r,[u.loading?((0,l.uX)(),(0,l.CE)("table",n,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.subjects,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e},L)))),128))])])):((0,l.uX)(),(0,l.CE)("div",y,[(0,l.bF)(k,{onSubmit:e.addToSchedule,"validation-schema":e.schema},{default:(0,l.k6)((()=>[(0,l.Lk)("div",v,[(0,l.Lk)("table",p,[_,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.teachers,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.teacher_id},[(0,l.Lk)("th",{onClick:t=>o.selectTeacher(e)},(0,s.v_)(e.last_name),9,g)])))),128))])]),u.selectedTeacher?((0,l.uX)(),(0,l.CE)("div",A,[(0,l.Lk)("h5",null,"Расписание преподавателя: "+(0,s.v_)(u.selectedTeacher.last_name),1),(0,l.Lk)("table",C,[T,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.selectedTeacherSchedule,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,s.v_)(e.dayofweek),1),(0,l.Lk)("td",null,(0,s.v_)(e.time),1),(0,l.Lk)("td",null,(0,s.v_)(e.group_number),1),(0,l.Lk)("td",{onClick:t=>o.selectDiscipline(e)},(0,s.v_)(e.subject_name),9,f)])))),128))])])])):(0,l.Q3)("",!0),u.selectedAuditoriums?((0,l.uX)(),(0,l.CE)("div",E,[(0,l.Lk)("table",w,[X,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.selectedAuditoriums,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t.aud_id,class:(0,s.C4)({"table-active":t===e.selectedAuditorium})},[(0,l.Lk)("td",{onClick:e=>o.selectAuditorium(t)},(0,s.v_)(t.number),9,D)],2)))),128))])])])):(0,l.Q3)("",!0)]),(0,l.bF)(h,{to:"/audits",class:"btn btn-secondary ml-2 float-start"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1}),(0,l.Lk)("button",{class:"btn btn-primary btn-block float-end",disabled:u.loading},[(0,l.bo)((0,l.Lk)("span",j,null,512),[[i.aG,u.loading]]),(0,l.eW)(" Сохранить ")],8,S)])),_:1},8,["onSubmit","validation-schema"])]))])])}a(4114);var I=a(619),G={data(){return{groups:[],subjects:[],teachers:[],employment:[],wl:[],auditorium:[],selectedTeacherSchedule:[],rels:[],selected_group:-1,selected_subject:-1,selectedTeacher:null,selectedAuditoriums:null,saved_num:-1,saved_group:0,saved_subject:0,saved_teacher:0,saved:!1,loading:!0,searchQuery:""}},methods:{async loadGroupsData(){try{const e=await I.A.getAllGroups();this.groups=Array.isArray(e.data)?e.data:[e.data],this.loading=!1}catch(e){console.error("Error loading groups data:",e)}},async loadTeachersData(){try{const e=await I.A.getAllTeachers();this.teachers=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Error:",e)}},async selectTeacher(e){this.selectedTeacher=e,this.loading=!0,await this.loadTeacherSchedule(e.teacher_id)},async loadTeacherSchedule(e){try{const t=await I.A.getAllTeacherSchedule(e);this.selectedTeacherSchedule=Array.isArray(t.data)?t.data:[t.data],this.loading=!1}catch(t){console.error("Ошибка при загрузке расписания преподавателя:",t)}},async selectDiscipline(e){this.selectedDiscipline=e,this.loadingAuditoriums=!0,await this.loadAuditoriums()},async loadAuditoriums(){try{const e=await I.A.getAuditoriumsByDiscipline();this.selectedAuditoriums=Array.isArray(e.data)?e.data:[e.data],this.loadingAuditoriums=!1}catch(e){console.error("Ошибка при загрузке аудиторий:",e)}},async selectAuditorium(e){this.selectedAuditorium=e},viewGroupDetail(e){this.$router.push(`/groups/${e}`)},viewRightsDetail(){this.$router.push("/Rights/groups")}},created(){const e=this.$route.query;this.currentPage=parseInt(e.page)||1,this.searchQuery=e.search||"",this.loadGroupsData(),this.loadTeachersData()}},Q=a(1241);const K=(0,Q.A)(G,[["render",F],["__scopeId","data-v-32d3c894"]]);var $=K}}]);
//# sourceMappingURL=2858.bb67b1cb.js.map