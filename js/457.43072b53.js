"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[457],{457:function(e,t,a){a.r(t),a.d(t,{default:function(){return ue}});var l=a(6768),s=a(4232),o=a(5130);const n=e=>((0,l.Qi)("data-v-3611c28e"),e=e(),(0,l.jt)(),e),i={class:"col-md-12 list"},d={key:0},r=n((()=>(0,l.Lk)("h2",null,"Данные слушателя",-1))),c={class:"form-group d-inline-flex align-items-center col-12 mb-2"},m=n((()=>(0,l.Lk)("label",{for:"lastname"},"Фамилия",-1))),u={class:"form-group d-inline-flex align-items-center col-12 mb-2"},p=n((()=>(0,l.Lk)("label",{for:"name"},"Имя",-1))),b={class:"form-group d-inline-flex align-items-center col-12 mb-2"},k=n((()=>(0,l.Lk)("label",{for:"surname"},"Отчество",-1))),f={class:"form-group d-inline-flex align-items-center mb-2 col-6"},v=n((()=>(0,l.Lk)("label",{for:"group_id"},"Группа:",-1))),L=["value"],g={class:"form-group d-inline-flex align-items-center mb-2 col-5"},h=n((()=>(0,l.Lk)("label",{for:"passport "},"Серия и номер паспорта",-1))),_={class:"form-group d-inline-flex align-items-center mb-2 col-5"},y=n((()=>(0,l.Lk)("label",{for:"issue_date"},"Дата выдачи",-1))),x={class:"form-group d-inline-flex align-items-center mb-2 col-5"},V=n((()=>(0,l.Lk)("label",{for:"department_code "},"Код подразделения",-1))),F={class:"form-group d-inline-flex align-items-center mb-2 col-5"},w=n((()=>(0,l.Lk)("label",{for:"registration_address "},"Адрес регистрации",-1))),C={class:"form-group d-inline-flex align-items-center mb-2 col-5"},U=n((()=>(0,l.Lk)("label",{for:"SNILS"},"СНИЛС",-1))),D={class:"form-group d-inline-flex align-items-center mb-2 col-5"},E=n((()=>(0,l.Lk)("label",{for:"phone_number "},"Телефон",-1))),I={class:"form-group d-inline-flex align-items-center mb-2 col-5"},A=n((()=>(0,l.Lk)("label",{for:"email"},"Email",-1))),S=n((()=>(0,l.Lk)("hr",{size:"2"},null,-1))),X=n((()=>(0,l.Lk)("h2",null,"Пожелания слушателя",-1))),N={class:"col-5"},j={class:"table table-bordered col col-3"},B=n((()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"День"),(0,l.Lk)("th",null,"Время начала"),(0,l.Lk)("th",null,"Время окончания")])],-1))),K=["onUpdate:modelValue"],G=["value"],R=["onUpdate:modelValue"],W=["onUpdate:modelValue"],$={class:"form-group d-inline-flex align-items-center mb-2 col-5"},J=n((()=>(0,l.Lk)("label",{for:"people_count"},"Количество человек:",-1))),M={class:"form-group d-inline-flex align-items-center mb-2 col-5"},Q=n((()=>(0,l.Lk)("label",{for:"hours"},"Количество часов:",-1))),T={class:"form-group d-inline-flex align-items-center mb-2 col-5"},z=n((()=>(0,l.Lk)("label",{for:"start_date"},"Начало:",-1))),q={class:"form-group d-inline-flex align-items-center mb-2 col-5"},H=n((()=>(0,l.Lk)("label",{for:"end_date"},"Конец:",-1))),O={class:"form-group d-inline-flex align-items-center mb-2 col-12"},P=n((()=>(0,l.Lk)("label",{for:"wish_description"},"Дополнительный комментарий:",-1))),Y={class:"form-group mt-3"},Z=["disabled"],ee={class:"spinner-border spinner-border-sm"},te={key:1},ae=(0,l.Fv)('<div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div><div class="form-group" data-v-3611c28e><label class="form-control skeleton-text skeleton-animate" data-v-3611c28e></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3611c28e></div>',13),le=[ae];function se(e,t,a,n,ae,se){const oe=(0,l.g2)("Field"),ne=(0,l.g2)("ErrorMessage"),ie=(0,l.g2)("Select2"),de=(0,l.g2)("router-link"),re=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",i,[ae.listener?((0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(re,{onSubmit:se.updateListener,"validation-schema":ae.schema},{default:(0,l.k6)((({errors:a})=>[r,(0,l.Lk)("div",null,[(0,l.Lk)("div",c,[m,(0,l.bF)(oe,{name:"lastname",type:"text",value:"",class:(0,s.C4)(["form-control",{"is-invalid":a.lastname}]),modelValue:ae.editedListener.lastname,"onUpdate:modelValue":t[0]||(t[0]=e=>ae.editedListener.lastname=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"lastname",class:"error-feedback"})]),(0,l.Lk)("div",u,[p,(0,l.bF)(oe,{name:"name",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.name}]),value:"",modelValue:ae.editedListener.name,"onUpdate:modelValue":t[1]||(t[1]=e=>ae.editedListener.name=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"name",class:"error-feedback"})]),(0,l.Lk)("div",b,[k,(0,l.bF)(oe,{name:"surname",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.patronymic}]),value:"",modelValue:ae.editedListener.surname,"onUpdate:modelValue":t[2]||(t[2]=e=>ae.editedListener.surname=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"surname",class:"error-feedback"})]),(0,l.Lk)("div",f,[v,(0,l.bF)(ie,{class:(0,s.C4)(["col-5",{"form-control is-invalid":a.group_id}]),modelValue:ae.editedListener.group_id,"onUpdate:modelValue":t[3]||(t[3]=e=>ae.editedListener.group_id=e),options:ae.groups,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(oe,{name:"group_id",as:"select",modelValue:ae.editedListener.group_id,"onUpdate:modelValue":t[4]||(t[4]=e=>ae.editedListener.group_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ae.groups,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.text),9,L)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(ne,{name:"group_id",class:"error-feedback"})]),(0,l.Lk)("div",g,[h,(0,l.bF)(oe,{name:"passport ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.passport}]),value:"",modelValue:ae.editedListener.passport,"onUpdate:modelValue":t[5]||(t[5]=e=>ae.editedListener.passport=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"passport ",class:"error-feedback"})]),(0,l.Lk)("div",_,[y,(0,l.bF)(oe,{name:"issue_date",type:"date",class:(0,s.C4)(["form-control",{"is-invalid":a.date}]),value:"",modelValue:ae.editedListener.issue_date,"onUpdate:modelValue":t[6]||(t[6]=e=>ae.editedListener.issue_date=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"issue_date ",class:"error-feedback"})]),(0,l.Lk)("div",x,[V,(0,l.bF)(oe,{name:"department_code ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.department_code}]),value:"",modelValue:ae.editedListener.department_code,"onUpdate:modelValue":t[7]||(t[7]=e=>ae.editedListener.department_code=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"department_code ",class:"error-feedback"})]),(0,l.Lk)("div",F,[w,(0,l.bF)(oe,{name:"registration_address ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.registration_address}]),value:"",modelValue:ae.editedListener.registration_address,"onUpdate:modelValue":t[8]||(t[8]=e=>ae.editedListener.registration_address=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"registration_address ",class:"error-feedback"})]),(0,l.Lk)("div",C,[U,(0,l.bF)(oe,{name:"SNILS",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.SNILS}]),value:"",modelValue:ae.editedListener.snils,"onUpdate:modelValue":t[9]||(t[9]=e=>ae.editedListener.snils=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"SNILS",class:"error-feedback"})]),(0,l.Lk)("div",D,[E,(0,l.bF)(oe,{name:"phone_number ",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.phone_number}]),value:"",modelValue:ae.editedListener.phone_number,"onUpdate:modelValue":t[10]||(t[10]=e=>ae.editedListener.phone_number=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"phone_number ",class:"error-feedback"})]),(0,l.Lk)("div",I,[A,(0,l.bF)(oe,{name:"email",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.email}]),value:"",modelValue:ae.editedListener.email,"onUpdate:modelValue":t[11]||(t[11]=e=>ae.editedListener.email=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"email",class:"error-feedback"})]),S,X,(0,l.Lk)("div",N,[(0,l.Lk)("table",j,[B,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ae.tableData,((t,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":e=>t.day_id=e},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.days,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.id},(0,s.v_)(e.text),9,G)))),128))],8,K),[[o.u1,t.day_id]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"time","onUpdate:modelValue":e=>t.starttime=e},null,8,R),[[o.Jo,t.starttime]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{class:"form-control",type:"time","onUpdate:modelValue":e=>t.endtime=e},null,8,W),[[o.Jo,t.endtime]])])])))),128))])]),(0,l.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>se.addRow&&se.addRow(...e))},"+")]),(0,l.Lk)("div",$,[J,(0,l.bF)(oe,{name:"people_count",type:"number",class:(0,s.C4)(["form-control",{"is-invalid":a.people_count}]),value:"",modelValue:ae.editedListener.people_count,"onUpdate:modelValue":t[13]||(t[13]=e=>ae.editedListener.people_count=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"people_count",class:"error-feedback"})]),(0,l.Lk)("div",M,[Q,(0,l.bF)(oe,{name:"hours",type:"number",class:(0,s.C4)(["form-control",{"is-invalid":a.hours}]),value:"",modelValue:ae.editedListener.hours,"onUpdate:modelValue":t[14]||(t[14]=e=>ae.editedListener.hours=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"hours",class:"error-feedback"})]),(0,l.Lk)("div",T,[z,(0,l.bF)(oe,{name:"start_date",type:"date",class:(0,s.C4)(["form-control",{"is-invalid":a.start_date}]),value:"",modelValue:ae.editedListener.start_date,"onUpdate:modelValue":t[15]||(t[15]=e=>ae.editedListener.start_date=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"start_date",class:"error-feedback"})]),(0,l.Lk)("div",q,[H,(0,l.bF)(oe,{name:"end_date",type:"date",class:(0,s.C4)(["form-control",{"is-invalid":a.end_date}]),value:"",modelValue:ae.editedListener.end_date,"onUpdate:modelValue":t[16]||(t[16]=e=>ae.editedListener.end_date=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"end_date",class:"error-feedback"})]),(0,l.Lk)("div",O,[P,(0,l.bF)(oe,{name:"wish_description",type:"text",class:(0,s.C4)(["form-control",{"is-invalid":a.wish_description}]),value:"",modelValue:ae.editedListener.wish_description,"onUpdate:modelValue":t[17]||(t[17]=e=>ae.editedListener.wish_description=e)},null,8,["class","modelValue"]),(0,l.bF)(ne,{name:"wish_description",class:"error-feedback"})]),(0,l.Lk)("div",Y,[(0,l.Lk)("button",{class:"btn btn-primary btn-block float-start",disabled:ae.loading},[(0,l.bo)((0,l.Lk)("span",ee,null,512),[[o.aG,ae.loading]]),(0,l.eW)(" Обновить слушателя ")],8,Z),(0,l.Lk)("button",{type:"button",class:"btn btn-danger mx-2 float-end",onClick:t[18]||(t[18]=(...e)=>se.deleteListener&&se.deleteListener(...e))}," Удалить слушателя "),(0,l.bF)(de,{to:"/listeners",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,l.uX)(),(0,l.CE)("div",te,le)),e.message?((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,s.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,s.v_)(e.message),3)):(0,l.Q3)("",!0)])}a(4114);var oe=a(482),ne=a(9041),ie=a(619),de=a(7411),re={setup(){const e=(0,de.dj)();return{toast:e}},components:{Form:oe.lV,Field:oe.D0,ErrorMessage:oe.Kw},data(){const e=ne.Ik().shape({});return{schema:e,loading:!1,listener:null,editedListener:null,days_of_week:null,groups:null,tableData:[],table_new_rows:!1}},methods:{async deleteListener(){try{this.loading=!0;const e=await ie.A.deleteListenerById(this.listener.id);e.data,this.loading=!1,this.toast.success("Успешно удалили!"),this.$router.push("/listeners")}catch(e){console.error("Ошибка загрузки данных",e)}},addRow(){const e={day_id:"",starttime:"",endtime:""};this.tableData.push(e),this.table_new_rows=!0},async loadListenerDetail(){const e=this.$route.params.listenerId;try{const t=await ie.A.getListenerById(e);this.listener=t.data,console.log(this.listener),console.log(this.listener.group_id),this.listener.group_id>0?console.log():this.listener.group_id="NULL",console.log(this.listener.group_id),this.editedListener={...t.data}}catch(t){console.error("Error loading listener details:",t)}},async updateListener(){try{this.loading=!0;const e=await ie.A.updateListenerById(this.listener.id,this.editedListener.name,this.editedListener.surname,this.editedListener.lastname,this.editedListener.group_id,this.editedListener.snils,this.editedListener.passport,this.editedListener.issued_by,this.editedListener.issue_date,this.editedListener.department_code,this.editedListener.registration_address,this.editedListener.phone_number,this.editedListener.email,this.editedListener.people_count,this.editedListener.hours,this.editedListener.start_date,this.editedListener.end_date,this.editedListener.wish_description,this.tableData,this.table_new_rows);e.data,this.listener={...this.editedListener},this.loading=!1,this.toast.success("Успешно обновили слушателя!")}catch(e){console.error("Ошибка :",e)}},async loadGroupsData(){try{const e=await ie.A.getLgroupsAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data],this.groups.unshift({id:"NULL",text:"Нет"}),this.dataLoading=!1}catch(e){console.error("Error loading students data:",e)}},async loadDaysData(){try{const e=await ie.A.getDaysAsIdText();this.days=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Error loading data:",e)}},async load_wishes(){try{const e=this.$route.params.listenerId,t=await ie.A.getWishDaysById(e);this.tableData=Array.isArray(t.data)?t.data:[t.data],console.log(this.tableData),this.dataLoading=!1}catch(e){console.error("Error loading data:",e)}}},created(){this.load_wishes(),this.loadGroupsData(),this.loadDaysData(),this.loadListenerDetail()}},ce=a(1241);const me=(0,ce.A)(re,[["render",se],["__scopeId","data-v-3611c28e"]]);var ue=me}}]);
//# sourceMappingURL=457.43072b53.js.map