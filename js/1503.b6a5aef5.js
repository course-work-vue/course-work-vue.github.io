"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[1503],{1503:function(e,a,t){t.r(a),t.d(a,{default:function(){return j}});var r=t(6768),o=t(4232),s=t(5130);const d=e=>((0,r.Qi)("data-v-3bf16a53"),e=e(),(0,r.jt)(),e),l={class:"col-md-12 list"},n={key:0},i={class:"form-group"},m=d((()=>(0,r.Lk)("label",{for:"required_amount"},"Стоимость обучения",-1))),u={class:"form-group"},c=d((()=>(0,r.Lk)("label",{for:"program_name"},"Название программы",-1))),g={class:"form-group"},b=d((()=>(0,r.Lk)("label",{for:"hours"},"Часы",-1))),p={class:"form-group"},f=d((()=>(0,r.Lk)("label",{for:"start_date"},"Начало обучения",-1))),v={class:"form-group"},h=d((()=>(0,r.Lk)("label",{for:"end_date"},"Конец обучния",-1))),k={class:"form-group mt-3"},_=["disabled"],P={class:"spinner-border spinner-border-sm"},y={key:1},F=(0,r.Fv)('<div class="form-group" data-v-3bf16a53><label class="form-control skeleton-text skeleton-animate" data-v-3bf16a53></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3bf16a53></div><div class="form-group" data-v-3bf16a53><label class="form-control skeleton-text skeleton-animate" data-v-3bf16a53></label><input type="text" class="form-control skeleton skeleton-animate" data-v-3bf16a53></div>',2),V=[F];function L(e,a,t,d,F,L){const C=(0,r.g2)("Field"),w=(0,r.g2)("ErrorMessage"),q=(0,r.g2)("router-link"),x=(0,r.g2)("Form");return(0,r.uX)(),(0,r.CE)("div",l,[F.program?((0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(x,{onSubmit:L.updateProgram,"validation-schema":F.schema},{default:(0,r.k6)((({errors:e})=>[(0,r.Lk)("div",null,[(0,r.Lk)("div",i,[m,(0,r.bF)(C,{name:"required_amount",type:"text",value:"",class:(0,o.C4)(["form-control",{"is-invalid":e.required_amount}]),modelValue:F.editedProgram.required_amount,"onUpdate:modelValue":a[0]||(a[0]=e=>F.editedProgram.required_amount=e)},null,8,["class","modelValue"]),(0,r.bF)(w,{name:"required_amount",class:"error-feedback"})]),(0,r.Lk)("div",u,[c,(0,r.bF)(C,{name:"program_name",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":e.program_name}]),value:"",modelValue:F.editedProgram.program_name,"onUpdate:modelValue":a[1]||(a[1]=e=>F.editedProgram.program_name=e)},null,8,["class","modelValue"]),(0,r.bF)(w,{name:"program_name",class:"error-feedback"})]),(0,r.Lk)("div",g,[b,(0,r.bF)(C,{name:"hours",type:"number",class:(0,o.C4)(["form-control",{"is-invalid":e.dir_code}]),value:"",modelValue:F.editedProgram.hours,"onUpdate:modelValue":a[2]||(a[2]=e=>F.editedProgram.hours=e)},null,8,["class","modelValue"]),(0,r.bF)(w,{name:"hours",class:"error-feedback"})]),(0,r.Lk)("div",p,[f,(0,r.bF)(C,{name:"start_date",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":e.start_date}]),value:"",modelValue:F.editedProgram.start_date,"onUpdate:modelValue":a[3]||(a[3]=e=>F.editedProgram.start_date=e)},null,8,["class","modelValue"]),(0,r.bF)(w,{name:"start_date",class:"error-feedback"})]),(0,r.Lk)("div",v,[h,(0,r.bF)(C,{name:"end_date",type:"date",class:(0,o.C4)(["form-control",{"is-invalid":e.end_date}]),value:"",modelValue:F.editedProgram.end_date,"onUpdate:modelValue":a[4]||(a[4]=e=>F.editedProgram.end_date=e)},null,8,["class","modelValue"]),(0,r.bF)(w,{name:"end_date",class:"error-feedback"})]),(0,r.Lk)("div",k,[(0,r.Lk)("button",{class:"btn btn-primary btn-block float-start",disabled:F.loading},[(0,r.bo)((0,r.Lk)("span",P,null,512),[[s.aG,F.loading]]),(0,r.eW)(" Обновить направление ")],8,_),(0,r.Lk)("button",{type:"button",class:"btn btn-danger mx-2 float-end",onClick:a[5]||(a[5]=(...e)=>L.deleteProgram&&L.deleteProgram(...e))}," Удалить программу "),(0,r.bF)(q,{to:"/programs",class:"btn btn-secondary ml-2 float-end"},{default:(0,r.k6)((()=>[(0,r.eW)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,r.uX)(),(0,r.CE)("div",y,V)),e.message?((0,r.uX)(),(0,r.CE)("div",{key:2,class:(0,o.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,o.v_)(e.message),3)):(0,r.Q3)("",!0)])}t(4114);var C=t(482),w=t(9041),q=t(619),x=t(7411),E={setup(){const e=(0,x.dj)();return{toast:e}},components:{Form:C.lV,Field:C.D0,ErrorMessage:C.Kw},data(){const e=w.Ik().shape({});return{schema:e,loading:!1,program:null,editedProgram:null,groups:null}},methods:{async deleteProgram(){try{this.loading=!0;const e=await q.A.deleteProgramById(this.editedProgram.id);e.data,this.loading=!1,this.toast.success("Успешно удалили!"),this.$router.push("/programs")}catch(e){console.error("Ошибка загрузки данных",e)}},async loadProgramDetail(){const e=this.$route.params.programId;try{const a=await q.A.getProgramById(e);this.program=a.data,this.editedProgram={...a.data}}catch(a){console.error("Error:",a)}},async updateProgram(){try{this.loading=!0;const e=await q.A.updateProgramById(this.editedProgram.id,this.editedProgram.required_amount,this.editedProgram.program_name,this.editedProgram.hours,this.editedProgram.start_date,this.editedProgram.end_date);e.data,this.student={...this.editedStudent},this.loading=!1,this.toast.success("Успешно обновили направление!")}catch(e){console.error("Ошибка:",e)}}},created(){this.loadProgramDetail()}},I=t(1241);const U=(0,I.A)(E,[["render",L],["__scopeId","data-v-3bf16a53"]]);var j=U}}]);
//# sourceMappingURL=1503.b6a5aef5.js.map