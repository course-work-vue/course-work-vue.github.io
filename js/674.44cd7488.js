"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[674],{674:function(e,t,a){a.r(t),a.d(t,{default:function(){return ve}});var l=a(6768),n=a(4232),d=a(5130);const o=e=>((0,l.Qi)("data-v-8f399ae2"),e=e(),(0,l.jt)(),e),s={class:"col-md-12 list"},i={key:0},r={class:"form-group d-inline-flex align-items-center col-12 mb-2"},u=o((()=>(0,l.Lk)("label",{class:"col-form-label",for:"last_name"},"Фамилия:",-1))),m={class:"form-group d-inline-flex align-items-center col-12 mb-2"},c=o((()=>(0,l.Lk)("label",{for:"first_name"},"Имя:",-1))),f={class:"form-group d-inline-flex align-items-center col-12 mb-2"},p=o((()=>(0,l.Lk)("label",{for:"patronymic"},"Отчество:",-1))),b={class:"form-group d-inline-flex align-items-center mb-2"},k=o((()=>(0,l.Lk)("label",{for:"gender"},"Пол:",-1))),v=o((()=>(0,l.Lk)("br",null,null,-1))),_=o((()=>(0,l.Lk)("br",null,null,-1))),g={class:"form-group d-inline-flex align-items-center mb-2"},h=o((()=>(0,l.Lk)("label",{for:"date_of_birth"},"Дата рождения:",-1))),S={class:"form-group d-inline-flex align-items-center mb-2 col-6"},x=o((()=>(0,l.Lk)("label",{for:"passport_series_and_number"},"Серия и номер паспорта:",-1))),y={class:"form-group d-inline-flex align-items-center mb-2 col-5"},L=o((()=>(0,l.Lk)("label",{for:"place_of_birth"},"Страна рождения:",-1))),V={class:"form-group d-inline-flex align-items-center mb-2"},F=o((()=>(0,l.Lk)("label",{for:"INN"},"ИНН:",-1))),C={class:"form-group d-inline-flex align-items-center mb-2"},I=o((()=>(0,l.Lk)("label",{for:"SNILS"},"СНИЛС:",-1))),U={class:"form-group d-inline-flex align-items-center mb-2 col-5"},N=o((()=>(0,l.Lk)("label",{for:"email"},"Email:",-1))),B={class:"form-group d-inline-flex align-items-center mb-2"},E=o((()=>(0,l.Lk)("label",{for:"student_login"},"Логин студента:",-1))),w={class:"form-group d-inline-flex align-items-center mb-2 col-5"},A=o((()=>(0,l.Lk)("label",{for:"enrollment_order"},"Приказ о зачислении:",-1))),X={class:"form-group d-inline-flex align-items-center mb-2"},z=o((()=>(0,l.Lk)("label",{for:"enrolled_date"},"Дата зачисления:",-1))),j={class:"d-flex flex-wrap"},W={class:"form-group d-inline-flex align-items-center mb-2"},D=o((()=>(0,l.Lk)("label",{for:"group_id"},"Группа:",-1))),q=["value"],G={class:"form-group d-inline-flex align-items-center float-none mb-2 col-3"},M=o((()=>(0,l.Lk)("label",{for:"subgroup"},"Подгруппа:",-1))),K=o((()=>(0,l.Lk)("option",{value:"Нет"},"Нет",-1))),Q=o((()=>(0,l.Lk)("option",{value:"1"},"1",-1))),Y=o((()=>(0,l.Lk)("option",{value:"2"},"2",-1))),$={class:"form-group d-inline-flex align-items-center float-none mb-2 col-5"},T=o((()=>(0,l.Lk)("label",{for:"zachetka_number"},"Номер зачётки:",-1))),H={class:"form-group d-inline-flex align-items-center float-none mb-2 col-6"},J=o((()=>(0,l.Lk)("label",{for:"phone_number"},"Номер телефона:",-1))),O={class:"form-group d-inline-flex align-items-center float-none mb-2 col-8"},P=o((()=>(0,l.Lk)("label",{for:"phone_number_rod"},"Номер телефона родителей:",-1))),R={class:"form-group d-inline-flex align-items-center col-5 mb-2"},Z=["checked"],ee=["checked"],te={class:"form-group mt-3"},ae={class:"form-group float-end"},le={class:"form-group mt-3"},ne=["disabled"],de={class:"spinner-border spinner-border-sm"},oe={key:1},se=(0,l.Fv)('<div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div><div class="form-group" data-v-8f399ae2><label class="form-control skeleton-text skeleton-animate" data-v-8f399ae2></label><input type="text" class="form-control skeleton skeleton-animate" data-v-8f399ae2></div>',18),ie=[se];function re(e,t,a,o,se,re){const ue=(0,l.g2)("Field"),me=(0,l.g2)("ErrorMessage"),ce=(0,l.g2)("Select2"),fe=(0,l.g2)("router-link"),pe=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)("div",s,[se.student?((0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(pe,{onSubmit:re.updateStudent,"validation-schema":se.schema},{default:(0,l.k6)((({errors:e})=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",r,[u,(0,l.bF)(ue,{name:"last_name",id:"last_name",type:"text",value:"",class:(0,n.C4)(["form-control",{"is-invalid":e.last_name}]),modelValue:se.editedStudent.last_name,"onUpdate:modelValue":t[0]||(t[0]=e=>se.editedStudent.last_name=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"last_name",class:"error-feedback"})]),(0,l.Lk)("div",m,[c,(0,l.bF)(ue,{name:"first_name",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.first_name}]),value:"",modelValue:se.editedStudent.first_name,"onUpdate:modelValue":t[1]||(t[1]=e=>se.editedStudent.first_name=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"first_name",class:"error-feedback"})]),(0,l.Lk)("div",f,[p,(0,l.bF)(ue,{name:"patronymic",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.patronymic}]),value:"",modelValue:se.editedStudent.patronymic,"onUpdate:modelValue":t[2]||(t[2]=e=>se.editedStudent.patronymic=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"patronymic",class:"error-feedback"})]),(0,l.Lk)("div",b,[k,v,(0,l.bF)(ue,{name:"gender",type:"radio",value:"m",class:(0,n.C4)(["form-check-input",{"is-invalid":e.gender}]),modelValue:se.editedStudent.gender,"onUpdate:modelValue":t[3]||(t[3]=e=>se.editedStudent.gender=e)},null,8,["class","modelValue"]),(0,l.eW)(" М "),(0,l.bF)(ue,{name:"gender",type:"radio",value:"f",class:(0,n.C4)(["form-check-input",{"is-invalid":e.gender}]),modelValue:se.editedStudent.gender,"onUpdate:modelValue":t[4]||(t[4]=e=>se.editedStudent.gender=e)},null,8,["class","modelValue"]),(0,l.eW)(" Ж "),_,(0,l.bF)(me,{name:"gender",class:"error-feedback"})]),(0,l.Lk)("div",g,[h,(0,l.bF)(ue,{name:"date_of_birth",type:"date",class:(0,n.C4)(["form-control",{"is-invalid":e.date}]),value:"",modelValue:se.editedStudent.date_of_birth,"onUpdate:modelValue":t[5]||(t[5]=e=>se.editedStudent.date_of_birth=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"date_of_birth",class:"error-feedback"})]),(0,l.Lk)("div",S,[x,(0,l.bF)(ue,{name:"passport_series_and_number",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.passport_series_and_number}]),value:"",modelValue:se.editedStudent.passport_series_and_number,"onUpdate:modelValue":t[6]||(t[6]=e=>se.editedStudent.passport_series_and_number=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"passport_series_and_number",class:"error-feedback"})]),(0,l.Lk)("div",y,[L,(0,l.bF)(ue,{name:"place_of_birth",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.place_of_birth}]),value:"",modelValue:se.editedStudent.place_of_birth,"onUpdate:modelValue":t[7]||(t[7]=e=>se.editedStudent.place_of_birth=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"place_of_birth",class:"error-feedback"})]),(0,l.Lk)("div",V,[F,(0,l.bF)(ue,{name:"INN",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.INN}]),value:"",modelValue:se.editedStudent.INN,"onUpdate:modelValue":t[8]||(t[8]=e=>se.editedStudent.INN=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"INN",class:"error-feedback"})]),(0,l.Lk)("div",C,[I,(0,l.bF)(ue,{name:"SNILS",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.SNILS}]),value:"",modelValue:se.editedStudent.SNILS,"onUpdate:modelValue":t[9]||(t[9]=e=>se.editedStudent.SNILS=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"SNILS",class:"error-feedback"})]),(0,l.Lk)("div",U,[N,(0,l.bF)(ue,{name:"email",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.email}]),value:"",modelValue:se.editedStudent.email,"onUpdate:modelValue":t[10]||(t[10]=e=>se.editedStudent.email=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"email",class:"error-feedback"})]),(0,l.Lk)("div",B,[E,(0,l.bF)(ue,{name:"student_login",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.student_login}]),value:"",modelValue:se.editedStudent.student_login,"onUpdate:modelValue":t[11]||(t[11]=e=>se.editedStudent.student_login=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"student_login",class:"error-feedback"})]),(0,l.Lk)("div",w,[A,(0,l.bF)(ue,{name:"enrollment_order",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.enrollment_order}]),value:"",modelValue:se.editedStudent.enrollment_order,"onUpdate:modelValue":t[12]||(t[12]=e=>se.editedStudent.enrollment_order=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"enrollment_order",class:"error-feedback"})]),(0,l.Lk)("div",X,[z,(0,l.bF)(ue,{name:"enrolled_date",type:"date",class:(0,n.C4)(["form-control",{"is-invalid":e.enrolled_date}]),value:"",modelValue:se.editedStudent.enrolled_date,"onUpdate:modelValue":t[13]||(t[13]=e=>se.editedStudent.enrolled_date=e)},null,8,["class","modelValue"]),(0,l.bF)(me,{name:"enrolled_date",class:"error-feedback"})]),(0,l.Lk)("div",j,[(0,l.Lk)("div",W,[D,(0,l.bF)(ce,{class:(0,n.C4)({"form-control is-invalid":e.group_id}),modelValue:se.editedStudent.group_id,"onUpdate:modelValue":t[14]||(t[14]=e=>se.editedStudent.group_id=e),options:se.groups,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.bF)(ue,{name:"group_id",as:"select",modelValue:se.editedStudent.group_id,"onUpdate:modelValue":t[15]||(t[15]=e=>se.editedStudent.group_id=e),hidden:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(se.groups,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.text),9,q)))),128))])),_:1},8,["modelValue"]),(0,l.bF)(me,{name:"group_id",class:"error-feedback"})]),(0,l.Lk)("div",G,[M,(0,l.bF)(ue,{name:"subgroup",as:"select",class:(0,n.C4)(["form-select",{"is-invalid":e.subgroup}]),modelValue:se.editedStudent.subgroup,"onUpdate:modelValue":t[16]||(t[16]=e=>se.editedStudent.subgroup=e)},{default:(0,l.k6)((()=>[K,Q,Y])),_:2},1032,["modelValue","class"]),(0,l.bF)(me,{name:"subgroup",class:"error-feedback"})]),(0,l.Lk)("div",$,[T,(0,l.bF)(ue,{name:"zachetka_number",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.zachetka_number}]),modelValue:se.editedStudent.zachetka_number,"onUpdate:modelValue":t[17]||(t[17]=e=>se.editedStudent.zachetka_number=e)},null,8,["modelValue","class"]),(0,l.bF)(me,{name:"zachetka_number",class:"error-feedback"})]),(0,l.Lk)("div",H,[J,(0,l.bF)(ue,{name:"phone_number",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.phone_number}]),modelValue:se.editedStudent.phone_number,"onUpdate:modelValue":t[18]||(t[18]=e=>se.editedStudent.phone_number=e)},null,8,["modelValue","class"]),(0,l.bF)(me,{name:"phone_number",class:"error-feedback"})]),(0,l.Lk)("div",O,[P,(0,l.bF)(ue,{name:"phone_number_rod",type:"text",class:(0,n.C4)(["form-control",{"is-invalid":e.phone_number_rod}]),modelValue:se.editedStudent.phone_number_rod,"onUpdate:modelValue":t[19]||(t[19]=e=>se.editedStudent.phone_number_rod=e)},null,8,["modelValue","class"]),(0,l.bF)(me,{name:"phone_number_rod",class:"error-feedback"})]),(0,l.Lk)("div",R,[(0,l.bF)(ue,{name:"isBudget",type:"radio",value:!0},{default:(0,l.k6)((({field2:e})=>[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",(0,l.v6)({type:"radio",name:"isBudget"},e,{value:"false",class:"form-check-input mt-0 ml-5","onUpdate:modelValue":t[20]||(t[20]=e=>se.editedStudent.isBudget=e),checked:0==se.editedStudent.isBudget}),null,16,Z),[[d.XL,se.editedStudent.isBudget]]),(0,l.eW)(" Договор ")])])),_:1}),(0,l.bF)(me,{name:"isBudget",class:"error-feedback"}),(0,l.bF)(ue,{name:"editedStudent.isBudget",type:"radio",value:!0},{default:(0,l.k6)((({field:e})=>[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",(0,l.v6)({type:"radio",name:"editedStudent.isBudget"},e,{value:"true",class:"form-check-input mt-0 ml-5","onUpdate:modelValue":t[21]||(t[21]=e=>se.editedStudent.isBudget=e),checked:1==se.editedStudent.isBudget}),null,16,ee),[[d.XL,se.editedStudent.isBudget]]),(0,l.eW)(" Бюджет ")])])),_:1})])]),(0,l.Lk)("div",te,[(0,l.bF)(fe,{to:"/students",class:"mx-2 btn btn-secondary float-start"},{default:(0,l.k6)((()=>[(0,l.eW)("Отмена")])),_:1})]),(0,l.Lk)("div",ae,[(0,l.Lk)("button",{class:"btn btn-danger float-end",onClick:t[22]||(t[22]=(...e)=>re.deleteStudent&&re.deleteStudent(...e))}," Удалить студента ")]),(0,l.Lk)("div",le,[(0,l.Lk)("button",{class:"btn btn-primary btn-block",disabled:se.loading},[(0,l.bo)((0,l.Lk)("span",de,null,512),[[d.aG,se.loading]]),(0,l.eW)(" Обновить студента ")],8,ne)])])])),_:1},8,["onSubmit","validation-schema"])])):((0,l.uX)(),(0,l.CE)("div",oe,ie)),e.message?((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,n.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,n.v_)(e.message),3)):(0,l.Q3)("",!0)])}a(4114);var ue=a(482),me=a(9041),ce=a(619),fe=a(7411),pe={setup(){const e=(0,fe.dj)();return{toast:e}},components:{Form:ue.lV,Field:ue.D0,ErrorMessage:ue.Kw},data(){const e=me.Ik().shape({email:me.Yj().required("Email is required!").email("Email is invalid!").max(50,"Must be maximum 50 characters!"),group_id:me.Yj().required("Email is required!")});return{schema:e,loading:!1,student:null,editedStudent:null,groups:null}},methods:{async loadStudentDetail(){const e=this.$route.params.studentId;try{const t=await ce.A.getStudentById(e);this.student=t.data,this.editedStudent={...t.data}}catch(t){console.error("Error loading student details:",t)}},async updateStudent(){try{this.loading=!0;const e=await ce.A.updateStudentById(this.student.student_id,this.editedStudent.first_name,this.editedStudent.last_name,this.editedStudent.patronymic,this.editedStudent.gender,this.editedStudent.date_of_birth,this.editedStudent.passport_series_and_number,this.editedStudent.INN,this.editedStudent.SNILS,this.editedStudent.place_of_birth,this.editedStudent.email,this.editedStudent.student_login,this.editedStudent.enrollment_order,this.editedStudent.enrolled_date,this.editedStudent.group_id,this.editedStudent.subgroup,this.editedStudent.zachetka_number,this.editedStudent.phone_number,this.editedStudent.phone_number_rod,this.editedStudent.isBudget);e.data,this.student={...this.editedStudent},this.loading=!1,this.toast.success("Успешно обновили студента!")}catch(e){console.error("Ошибка загрузки данных о студенте:",e)}},async deleteStudent(){try{this.loading=!0;const e=await ce.A.deleteStudentById(this.student.student_id);e.data,this.student={...this.editedStudent},this.loading=!1,this.toast.success("Успешно удалили студента!"),this.$router.push("/students")}catch(e){console.error("Ошибка загрузки данных о студенте:",e)}},async loadGroupsData(){try{const e=await ce.A.getGroupsAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных о студенте:",e)}}},created(){this.loadGroupsData(),this.loadStudentDetail()}},be=a(1241);const ke=(0,be.A)(pe,[["render",re],["__scopeId","data-v-8f399ae2"]]);var ve=ke}}]);
//# sourceMappingURL=674.44cd7488.js.map