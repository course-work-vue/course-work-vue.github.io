"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[4121],{4121:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var s=a(6768),o=a(4232),l=a(5130);const d=e=>((0,s.Qi)("data-v-57d3ee74"),e=e(),(0,s.jt)(),e),n={class:"col-md-12 list"},r={key:0},i={class:"form-group d-inline-flex align-items-center float-none mb-2 col-3"},c=d((()=>(0,s.Lk)("label",{for:"course"},"Подгруппа:",-1))),u={class:"d-flex flex-wrap"},m={class:"form-group d-inline-flex align-items-center mb-2"},v=d((()=>(0,s.Lk)("label",{for:"group_id"},"Группа:",-1))),p=["value"],k={class:"form-group mt-3"},f={class:"form-group float-end"},b={class:"form-group mt-3"},g=["disabled"],h={class:"spinner-border spinner-border-sm"},x={key:1},y=(0,s.Fv)('<div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div><div class="form-group" data-v-57d3ee74><label class="form-control skeleton-text skeleton-animate" data-v-57d3ee74></label><input type="text" class="form-control skeleton skeleton-animate" data-v-57d3ee74></div>',12),C=[y];function _(e,t,a,d,y,_){const F=(0,s.g2)("Field"),E=(0,s.g2)("ErrorMessage"),L=(0,s.g2)("Select2"),w=(0,s.g2)("router-link"),V=(0,s.g2)("Form");return(0,s.uX)(),(0,s.CE)("div",n,[y.student?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(V,{onSubmit:e.updateStudent,"validation-schema":y.schema},{default:(0,s.k6)((({errors:a})=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",i,[c,(0,s.bF)(F,{name:"course",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":a.course}]),modelValue:e.editedCourse.course,"onUpdate:modelValue":t[0]||(t[0]=t=>e.editedCourse.course=t)},null,8,["class","modelValue"]),(0,s.bF)(E,{name:"course",class:"error-feedback"})]),(0,s.Lk)("div",u,[(0,s.Lk)("div",m,[v,(0,s.bF)(L,{class:(0,o.C4)({"form-control is-invalid":a.group_id}),modelValue:e.editedCourse.group_id,"onUpdate:modelValue":t[1]||(t[1]=t=>e.editedCourse.group_id=t),options:y.groups,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,s.bF)(F,{name:"group_id",as:"select",modelValue:e.editedCourse.group_id,"onUpdate:modelValue":t[2]||(t[2]=t=>e.editedCourse.group_id=t),hidden:""},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.groups,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.text),9,p)))),128))])),_:1},8,["modelValue"]),(0,s.bF)(E,{name:"group_id",class:"error-feedback"})])]),(0,s.Lk)("div",k,[(0,s.bF)(w,{to:"/courses",class:"mx-2 btn btn-secondary float-start"},{default:(0,s.k6)((()=>[(0,s.eW)("Отмена")])),_:1})]),(0,s.Lk)("div",f,[(0,s.Lk)("button",{class:"btn btn-danger float-end",onClick:t[3]||(t[3]=(...e)=>_.deleteCourse&&_.deleteCourse(...e))}," Удалить студента ")]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{class:"btn btn-primary btn-block",disabled:y.loading},[(0,s.bo)((0,s.Lk)("span",h,null,512),[[l.aG,y.loading]]),(0,s.eW)(" Обновить курс ")],8,g)])])])),_:1},8,["onSubmit","validation-schema"])])):((0,s.uX)(),(0,s.CE)("div",x,C)),e.message?((0,s.uX)(),(0,s.CE)("div",{key:2,class:(0,o.C4)(["alert",e.successful?"alert-success":"alert-danger"])},(0,o.v_)(e.message),3)):(0,s.Q3)("",!0)])}var F=a(482),E=a(9041),L=a(619),w=a(7411),V={setup(){const e=(0,w.dj)();return{toast:e}},components:{Form:F.lV,Field:F.D0,ErrorMessage:F.Kw},data(){const e=E.Ik().shape({email:E.Yj().required("Email is required!").email("Email is invalid!").max(50,"Must be maximum 50 characters!"),group_id:E.Yj().required("Email is required!")});return{schema:e,loading:!1,student:null,editedStudent:null,groups:null}},methods:{async loadCourseDetail(){const e=this.$route.params.courseId;try{const t=await L.A.getCourseById(e);this.student=t.data,this.editedCourse={...t.data}}catch(t){console.error("Error loading student details:",t)}},async updateCourse(){try{this.loading=!0;const e=await L.A.updateCourseById(this.course.course_id,this.editedCourse.course,this.editedCourse.group_id);e.data,this.course={...this.editedCourse},this.loading=!1,this.toast.success("Успешно обновили студента!")}catch(e){console.error("Ошибка загрузки данных о студенте:",e)}},async deleteCourse(){try{this.loading=!0;const e=await L.A.deleteStudentById(this.student.student_id);e.data,this.student={...this.editedStudent},this.loading=!1,this.toast.success("Успешно удалили курс!")}catch(e){console.error("Ошибка загрузки данных о курс:",e)}},async loadGroupsData(){try{const e=await L.A.getGroupsAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных о курсе:",e)}}},created(){this.loadCourseDetail(),this.loadStudentDetail()}},A=a(1241);const I=(0,A.A)(V,[["render",_],["__scopeId","data-v-57d3ee74"]]);var S=I}}]);
//# sourceMappingURL=4121.d3e830e5.js.map